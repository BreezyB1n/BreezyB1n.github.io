<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MySQL基础知识速查 | B1n_'s Blog</title><meta name="author" content="B1n_"><meta name="copyright" content="B1n_"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="阅读前提醒⚠️⚠️⚠️本文适合于有一定的SQL基础再进行阅读，并不适合新手入门，本文更多是基本特性的简短介绍，更加注重让读者更好的巩固SQL知识。 SELECT SELECT 语句的正确语义应是 FROM table_name SELECT columns_list，即：从某个表检索某几列数据。MySQL 解析 SELECT 语句的时候，会首先评估 FROM 子句，再评估 SELECT 子句。">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL基础知识速查">
<meta property="og:url" content="http://example.com/2024/03/01/MySQL%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9%E9%80%9F%E6%9F%A5/index.html">
<meta property="og:site_name" content="B1n_&#39;s Blog">
<meta property="og:description" content="阅读前提醒⚠️⚠️⚠️本文适合于有一定的SQL基础再进行阅读，并不适合新手入门，本文更多是基本特性的简短介绍，更加注重让读者更好的巩固SQL知识。 SELECT SELECT 语句的正确语义应是 FROM table_name SELECT columns_list，即：从某个表检索某几列数据。MySQL 解析 SELECT 语句的时候，会首先评估 FROM 子句，再评估 SELECT 子句。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-03-01T09:03:13.467Z">
<meta property="article:modified_time" content="2024-03-01T09:05:07.944Z">
<meta property="article:author" content="B1n_">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/03/01/MySQL%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9%E9%80%9F%E6%9F%A5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL基础知识速查',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-01 17:05:07'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="B1n_'s Blog"><span class="site-name">B1n_'s Blog</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MySQL基础知识速查</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-03-01T09:03:13.467Z" title="Created 2024-03-01 17:03:13">2024-03-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-03-01T09:05:07.944Z" title="Updated 2024-03-01 17:05:07">2024-03-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MySQL基础知识速查"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><a name="W9DaE"></a></p>
<h1 id="阅读前提醒⚠️⚠️⚠️"><a href="#阅读前提醒⚠️⚠️⚠️" class="headerlink" title="阅读前提醒⚠️⚠️⚠️"></a>阅读前提醒⚠️⚠️⚠️</h1><p>本文适合于有一定的SQL基础再进行阅读，并不适合新手入门，本文更多是基本特性的简短介绍，更加注重让读者更好的巩固SQL知识。<br><a name="cvGd0"></a></p>
<h1 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h1><ol>
<li><strong>SELECT</strong> 语句的正确语义应是 <strong>FROM table_name SELECT columns_list</strong>，即：从某个表检索某几列数据。MySQL 解析 <strong>SELECT</strong> 语句的时候，会首先评估 <strong>FROM</strong> 子句，再评估 <strong>SELECT</strong> 子句。</li>
<li>一个结果 <strong>SELECT</strong> 语句被称为结果集，因为它是一组行从查询结果。</li>
<li>你可能要问， **SELECT *** 与 <strong>SELECT column_name</strong> 有什么区别呢？就一般而言，两者的性能差不多。就区别而言，有如下不同：</li>
</ol>
<ul>
<li><p>写出明确的字段，更容易理解你的 SQL 的查询意图</p>
</li>
<li><p>某些大字段不适合直接查询出来，因为直接查询会占用更多的开销?</p>
</li>
<li><p>**SELECT *** 更适合在命令行或者测试场景下使用</p>
</li>
<li><p><strong>SELECT</strong> 后面可以直接跟表达式，这种情况下可以省略 <strong>FROM</strong>。</p>
</li>
<li><p><strong>dual</strong> 表是一个虚拟表，可以让没有 <strong>FROM</strong> 的语句满足 <strong>SELECT … FROM</strong> 语句的结构。<br><a name="qmLuP"></a></p>
</li>
</ul>
<h2 id="AND"><a href="#AND" class="headerlink" title="AND"></a>AND</h2><blockquote>
<p>如果两个操作数都不为 <strong>0</strong> (<strong>FALSE</strong>) 并且不为 <strong>NULL</strong> 时，则 <strong>AND</strong> 运算的结果为 <strong>1</strong>。<br>如果有一个操作数为 <strong>0</strong> (<strong>FALSE</strong>)，则 <strong>AND</strong> 运算的结果为 <strong>0</strong>。<br>如果两个操作数中有一个为 <strong>NULL</strong>，且另一个不为 <strong>0</strong> (<strong>FALSE</strong>)，则返回 <strong>NULL</strong>。</p>
</blockquote>
<p><a name="Svz1H"></a></p>
<h2 id="OR"><a href="#OR" class="headerlink" title="OR"></a>OR</h2><p>:::info</p>
<ul>
<li>如果两个操作数中至少一个操作数为 <strong>1</strong> (<strong>TURE</strong>)，则 <strong>OR</strong> 运算的结果为 <strong>1</strong>。</li>
<li>如果两个操作数都为 <strong>0</strong> (<strong>FALSE</strong>)，则 <strong>OR</strong> 运算的结果为 <strong>0</strong>。</li>
<li>如果两个操作数有一个为 <strong>NULL</strong>，另一个为 <strong>0</strong> (<strong>FALSE</strong>) 或者 <strong>NULL</strong>，则 <strong>OR</strong> 运算的结果为 <strong>NULL</strong>。</li>
<li><strong>AND</strong> 运算符的优先级高于 <strong>OR</strong>。使用括号更改计算顺序。<br>:::<br><a name="YdTlW"></a></li>
</ul>
<h2 id="IN"><a href="#IN" class="headerlink" title="IN"></a>IN</h2><p><strong>IN</strong> 运算符用来检查一个字段或值是否包含在一个集合中，如果值包含在集合中返回 <strong>1</strong>，否则返回 <strong>0</strong>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">actor</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">last_name <span class="keyword">IN</span> (<span class="string">&#x27;ALLEN&#x27;</span>, <span class="string">&#x27;DAVIS&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p><strong>NOT IN</strong> 和 <strong>IN</strong> 几乎一样，只是在 <strong>IN</strong> 前面添加一个 <strong>NOT</strong> 关键字<br /><code>**SELECT * FROM language WHERE name NOT IN (&#39;French&#39; , &#39;German&#39;);**</code></p>
<p><a name="UPWZE"></a></p>
<h2 id="BETWEEN"><a href="#BETWEEN" class="headerlink" title="BETWEEN"></a>BETWEEN</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    film_id, title, replacement_cost</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    film</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    replacement_cost <span class="keyword">BETWEEN</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p><a name="W2Hni"></a></p>
<h2 id="LIKE"><a href="#LIKE" class="headerlink" title="LIKE"></a>LIKE</h2><p>在 MySQL 中， <strong>LIKE</strong> 运算符可以根据指定的模式过滤数据。<strong>LIKE</strong> 运算符一般用于模糊匹配字符数据。<br>:::tips<br>MySQL 字符串模式支持两个通配符： <strong>%</strong> 和 **_**。</p>
<ul>
<li><strong>%</strong> 匹配零或多个任意字符。</li>
<li><strong>_</strong> 匹配单个任意字符。</li>
<li>如果需要匹配通配符，则需要使用 *<em>*</em> 转义字符，如 <strong>%</strong> 和 **_**。</li>
<li>使用通配符匹配文本时，不区分字母大小写。</li>
</ul>
<p>比如：</p>
<ul>
<li><strong>a%</strong> 匹配以字符 <strong>a</strong> 开头的任意长度的字符串。</li>
<li><strong>%a</strong> 匹配以字符 <strong>a</strong> 结尾的任意长度的字符串。</li>
<li><strong>%a%</strong> 匹配包含字符 <strong>a</strong> 的任意长度的字符串。</li>
<li><strong>%a%b%</strong> 匹配同时包含字符 <strong>a</strong> 和 <strong>b</strong> 且 <strong>a</strong> 在 <strong>b</strong> 前面的任意长度的字符串。</li>
<li><strong>a_</strong> 匹配以字符 <strong>a</strong> 开头长度为 2 字符串。</li>
<li><strong>_a</strong> 匹配以字符 <strong>a</strong> 结尾长度为 2 字符串。<br>:::<br><code>SELECT * FROM actor WHERE first_name LIKE &#39;P%&#39;;</code><br /><code>SELECT * FROM actor WHERE first_name LIKE &#39;_AY&#39;;</code></li>
</ul>
<p><a name="XpyWS"></a></p>
<h2 id="IS-NULL"><a href="#IS-NULL" class="headerlink" title="IS NULL"></a>IS NULL</h2><p>IS NULL 和 IS NOT NULL 可以用在 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/select/">SELECT</a> 子句或者 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/where/">WHERE</a> 子句中。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    first_name, last_name, password</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    staff</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    password <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<p><a name="q8Hul"></a></p>
<h2 id="EXISTS（有点懵）"><a href="#EXISTS（有点懵）" class="headerlink" title="EXISTS（有点懵）"></a>EXISTS（有点懵）</h2><p>在 MySQL 中，<strong>EXISTS</strong> 操作符用来判断一个子查询是否返回数据行。如果一个子查询返回了至少一个数据行，则 <strong>EXISTS</strong> 的计算结果为 <strong>TRUE</strong>，否则计算结果为 <strong>FALSE</strong>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(subquery);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>EXISTS</strong> 使用说明：</p>
<ul>
<li><strong>EXISTS</strong> 一般用在 <strong>WHERE</strong> 子句中。</li>
<li><strong>EXISTS</strong> 是一个单目操作符，它需要一个子查询 <strong>subquery</strong> 作为参数。</li>
<li>如果子查询 <strong>subquery</strong> 返回了至少一个数据行，则 <strong>EXISTS</strong> 的计算结果为 <strong>TRUE</strong>，否则计算结果为 <strong>FALSE</strong>。</li>
<li><strong>EXISTS</strong> 运算时，一旦子查询找到一个匹配的行，<strong>EXISTS</strong> 运算就会返回。这对提高查询新能很有帮助。</li>
<li><strong>EXISTS</strong> 不关心子查询中的列的数量或者名称，它只在乎子查询是否返回数据行。所以在 <strong>EXISTS</strong> 的子查询中，无论你是使用 <strong>SELECT 1</strong> 还是 **SELECT ***，亦或是 <strong>SELECT column_list</strong>，都不影响 <strong>EXISTS</strong> 运算的结果。</li>
<li><strong>NOT EXISTS</strong> 则是 <strong>EXISTS</strong> 的否定操作。</li>
<li>大多数情况下，使用 <strong>EXISTS</strong> 的语句的性能比对应的使用 <strong>IN</strong> 的语句要好。</li>
</ul>
</blockquote>
<p>下面的实例查询 <strong>language</strong> 表的一些语种，该语种在 <strong>film</strong> 表中存在相关语种的影片。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">language</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">    <span class="keyword">FROM</span> film</span><br><span class="line">    <span class="keyword">WHERE</span> film.language_id <span class="operator">=</span> language.language_id</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">-------------+---------+---------------------+</span></span><br><span class="line"><span class="operator">|</span> language_id <span class="operator">|</span> name    <span class="operator">|</span> last_update         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+---------+---------------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">1</span> <span class="operator">|</span> English <span class="operator">|</span> <span class="number">2006</span><span class="number">-02</span><span class="number">-15</span> <span class="number">05</span>:<span class="number">02</span>:<span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+---------+---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>在上面的例子中，我们在 <strong>WHERE</strong> 子句中使用了 <strong>EXISTS</strong> 操作符。在 <strong>EXISTS</strong> 的子查询中，我们从 <strong>film</strong> 表中检索记录，检索的条件是 <strong>film.language_id &#x3D; language.language_id</strong>。<br />在检索 <strong>language</strong> 表的每一行时，只要 <strong>film</strong> 表存在一行数据具有相同的 <strong>language_id</strong>， <strong>EXISTS</strong> 就返回 <strong>TRUE</strong>。然后进入 <strong>language</strong> 表的下一行，直到所有行都检索完成，然后返回 <strong>language</strong> 表中所有匹配成功的行。<br />最终的结果告诉我们，在 <strong>language</strong> 表中，只有语种 <strong>English</strong> 拥有影片。<br /><strong>EXISTS</strong> 不关心子查询中的列的数量或者名称，它只在乎子查询是否返回数据行。</p>
<p><a name="D2XIA"></a></p>
<h2 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h2><p>我们可以通过 <strong>ORDER BY</strong> 子句指定排序的字段以及升序排序还是降序排序。<br>:::success<br>说明：</p>
<ul>
<li><p><strong>ORDER BY</strong> 子句可以指定一个或多个字段。</p>
</li>
<li><p><strong>[ASC|DESC]</strong> 代表排序是升序还是降序，这是可选的。</p>
</li>
<li><p><strong>ASC</strong> 代表升序，<strong>DESC</strong> 代表降序。</p>
</li>
<li><p>未指定 <strong>[ASC|DESC]</strong> 时，默认值是 <strong>ASC</strong>。即，默认是按指定的字段升序排序。</p>
</li>
<li><p>当指定多个列时，首先按照前面的字段排序，其次按照后面的字段排序。</p>
</li>
<li><p><strong>ORDER BY column ASC;</strong></p>
</li>
</ul>
<p>此 <strong>ORDER BY</strong> 子句对结果集按 <strong>column</strong> 字段的值升序排序。</p>
<ul>
<li><strong>ORDER BY column DESC;</strong></li>
</ul>
<p>此 <strong>ORDER BY</strong> 子句对结果集按 <strong>column</strong> 字段的值降序排序。</p>
<ul>
<li><strong>ORDER BY column;</strong></li>
</ul>
<p>此 <strong>ORDER BY</strong> 子句对结果集按 <strong>column</strong> 字段的值升序排序。这个语句等效于： **ORDER BY column ASC;**。</p>
<ul>
<li><strong>ORDER BY column1, column2;</strong></li>
</ul>
<p>此 <strong>ORDER BY</strong> 子句对结果集先按 <strong>column1</strong> 字段的值升序排序，然后再按 <strong>column2</strong> 字段的值升序排序。也就是说主排序按 <strong>column1</strong> 字段升序排序，在主排序的基础上，对 <strong>column1</strong> 字段相同的行，再按 <strong>column2</strong> 字段升序排序。</p>
<ul>
<li><strong>ORDER BY column1 DESC, column2;</strong></li>
</ul>
<p>此 <strong>ORDER BY</strong> 子句对结果集先按 <strong>column1</strong> 字段的值降序排序，然后再按按 <strong>column2</strong> 字段的值升序排序。也就是说主排序按 <strong>column1</strong> 字段降序排序，在主排序的基础上，对 <strong>column1</strong> 字段相同的行，再按 <strong>column2</strong> 字段升序排序。<br>:::<br><a name="u4RC2"></a></p>
<h2 id="自定义排序"><a href="#自定义排序" class="headerlink" title="自定义排序"></a><br />自定义排序</h2><p>我们需要按照电影分级 <strong>‘G’, ‘PG’, ‘PG-13’, ‘R’, ‘NC-17’</strong> 的顺序对影片进行排序。<br />对于这样的需求，它可以理解为按照列表中元素的索引位置进行排序。我们分别使用 <strong>CASE</strong> 子句或 <strong>FIELD()</strong> 函数实现它。<br />使用<strong>CASE</strong>实现</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    film_id, title, rating</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    film</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">CASE</span> rating</span><br><span class="line">    <span class="keyword">WHEN</span> <span class="string">&#x27;G&#x27;</span> <span class="keyword">THEN</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="string">&#x27;PG&#x27;</span> <span class="keyword">THEN</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="string">&#x27;PG-13&#x27;</span> <span class="keyword">THEN</span> <span class="number">3</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="string">&#x27;R&#x27;</span> <span class="keyword">THEN</span> <span class="number">4</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="string">&#x27;NC-17&#x27;</span> <span class="keyword">THEN</span> <span class="number">5</span></span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>
<p>使用<strong>FIELD</strong>实现</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    film</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> FIELD(rating, <span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;PG&#x27;</span>, <span class="string">&#x27;PG-13&#x27;</span>, <span class="string">&#x27;R&#x27;</span>, <span class="string">&#x27;NC-17&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>升序排序时， <strong>NULL</strong> 在非 NULL 值之前；降序排序时，<strong>NULL</strong> 在非 NULL 值之后。</li>
</ul>
<p><a name="HYMcd"></a></p>
<h2 id="LIMIT"><a href="#LIMIT" class="headerlink" title="LIMIT"></a>LIMIT</h2><p>该 <strong>LIMIT</strong> 子句可用于限制 <strong>SELECT</strong> 语句返回的行数。 <strong>LIMIT</strong> 接受一个或两个非负数正数作为参数。<br /><strong>LIMIT</strong> 子句的语法如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT [<span class="keyword">offset</span>,] row_count;</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT row_count <span class="keyword">OFFSET</span> <span class="keyword">offset</span>;</span><br></pre></td></tr></table></figure>
<p>:::warning<br>说明：</p>
<ul>
<li>上述两种语法的结果是等效的，只是写法略有不同。</li>
<li><strong>offset</strong> 指定要返回的第一行的偏移量。偏移量是相对于未使用 <strong>LIMIT</strong> 语句时的原始结果集而言的。<strong>offset</strong> 可理解为在原始结果集的基础上跳过的行数。</li>
<li><strong>row_count</strong> 执行要返回的最大行数。</li>
<li><strong>offset</strong> 是可选的。当未指定 <strong>offset</strong> 时，默认的值 <strong>offset</strong> 为 <strong>0</strong>。</li>
<li><strong>LIMIT</strong> 一般位于 <strong>SELECT</strong> 语句的最后。</li>
</ul>
<p>例如：</p>
<ul>
<li><strong>LIMIT 5</strong>最多返回 5 个记录行，等效于 <strong>LIMIT 0 5</strong></li>
<li><strong>LIMIT 2 5</strong>在原始结果集中，跳过 2 个记录行，并从 第 3 个记录行开始，最多返回 5 个记录行。<br>:::<br><br /><strong>SELECT</strong> 语句中， MySQL 会先按照 <strong>ORDER BY</strong> 指定的规则对排序结果集，再返回 <strong>LIMIT</strong> 子句指定的行数返回结果集。</li>
</ul>
<p>要查询第二页需要先跳过第一页的 10 行数据并限制最多行数为 10 行数据，整个 SQL 如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> film_id, title <span class="keyword">FROM</span> film LIMIT <span class="number">10</span>, <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p><a name="W7yy1"></a></p>
<h2 id="DISTINCT"><a href="#DISTINCT" class="headerlink" title="DISTINCT"></a>DISTINCT</h2><p><code>SELECT DISTINCT last_name FROM actor;</code></p>
<blockquote>
<ul>
<li><strong>DISTINCT</strong> 清除 <strong>SELECT</strong> 结果集中的重复记录行。</li>
<li><strong>DISTINCT</strong> 可以用一个字段或者多个字段，也可以用 *****。</li>
<li><strong>DISTINCT</strong> 多个 <strong>NULL</strong> 值只保留一个 <strong>NULL</strong> 值。</li>
</ul>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/limit/">←</a></p>
<p><a name="u5359"></a></p>
<h1 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h1><p><a name="I3KxX"></a></p>
<h2 id="JOIN"><a href="#JOIN" class="headerlink" title="JOIN"></a>JOIN</h2><p>MySQL 支持以下类型的连接：</p>
<ul>
<li>内部联接 (<strong>INNER JOIN</strong>)</li>
<li>左连接 (<strong>LEFT JOIN</strong>)</li>
<li>右连接 (<strong>RIGHT JOIN</strong>)</li>
<li>交叉连接 (<strong>CROSS JOIN</strong>)<br><a name="bkP8z"></a></li>
</ul>
<h2 id="交叉连接"><a href="#交叉连接" class="headerlink" title="交叉连接"></a><br />交叉连接</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1708744225136-5c6ff0d5-3553-418d-b2da-3d5c14b674ad.png#averageHue=%23fdf9f6&clientId=u7d717928-d71a-4&from=paste&height=294&id=ub97cff55&originHeight=588&originWidth=1570&originalType=binary&ratio=2&rotation=0&showTitle=false&size=83204&status=done&style=none&taskId=ue82eb71d-7795-422c-97f6-26827a8b3ad&title=&width=785" alt="image.png"><br />显式的交叉连接 <strong>student</strong> 和 <strong>student_score</strong> 表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  student.<span class="operator">*</span>,</span><br><span class="line">  student_score.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student <span class="keyword">CROSS</span> <span class="keyword">JOIN</span> student_score;</span><br></pre></td></tr></table></figure>
<p>隐式的交叉连接 <strong>student</strong> 和 <strong>student_score</strong> 表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  student.<span class="operator">*</span>,</span><br><span class="line">  student_score.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student, student_score;</span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">------------+------+------------+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> student_id <span class="operator">|</span> name <span class="operator">|</span> student_id <span class="operator">|</span> subject <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------+------------+---------+-------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">3</span> <span class="operator">|</span> Lucy <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">90</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Jim  <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">90</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Tim  <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">90</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">3</span> <span class="operator">|</span> Lucy <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Math    <span class="operator">|</span>    <span class="number">80</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Jim  <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Math    <span class="operator">|</span>    <span class="number">80</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Tim  <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Math    <span class="operator">|</span>    <span class="number">80</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">3</span> <span class="operator">|</span> Lucy <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">85</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Jim  <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">85</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Tim  <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">85</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">3</span> <span class="operator">|</span> Lucy <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Math    <span class="operator">|</span>    <span class="number">88</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Jim  <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Math    <span class="operator">|</span>    <span class="number">88</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Tim  <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Math    <span class="operator">|</span>    <span class="number">88</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">3</span> <span class="operator">|</span> Lucy <span class="operator">|</span>          <span class="number">5</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">92</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Jim  <span class="operator">|</span>          <span class="number">5</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">92</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Tim  <span class="operator">|</span>          <span class="number">5</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">92</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------+------------+---------+-------+</span></span><br><span class="line"><span class="number">15</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1708744379334-561286a8-a801-463d-91f4-56ad29938239.png#averageHue=%23fcf9f7&clientId=u7d717928-d71a-4&from=paste&height=251&id=u42cfc80c&originHeight=502&originWidth=1664&originalType=binary&ratio=2&rotation=0&showTitle=false&size=72323&status=done&style=none&taskId=u02c7e474-42a1-4bdf-9254-9931ed19fba&title=&width=832" alt="image.png"></p>
<p><a name="WbAes"></a></p>
<h2 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  student.<span class="operator">*</span>,</span><br><span class="line">  student_score.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> student_score</span><br><span class="line">  <span class="keyword">ON</span> student.student_id <span class="operator">=</span> student_score.student_id;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  student.<span class="operator">*</span>,</span><br><span class="line">  student_score.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student, student_score</span><br><span class="line">  <span class="keyword">WHERE</span> student.student_id <span class="operator">=</span> student_score.student_id;</span><br></pre></td></tr></table></figure>
<p><code>where student.student_id = student_score.student_id;</code>等价于 <code>USING(student_id)</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  student.<span class="operator">*</span>,</span><br><span class="line">  student_score.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line">  <span class="keyword">INNER</span> <span class="keyword">JOIN</span> student_score <span class="keyword">USING</span>(student_id);</span><br></pre></td></tr></table></figure>

<p><a name="Y5jNL"></a></p>
<h1 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h1><p><a name="EPUyj"></a></p>
<h3 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1708745439292-13c244b3-c9cc-4c51-94ab-3e6084bd7736.png#averageHue=%2385772f&clientId=u7d717928-d71a-4&from=paste&height=201&id=u2813ff33&originHeight=149&originWidth=220&originalType=binary&ratio=2&rotation=0&showTitle=false&size=14770&status=done&style=none&taskId=u32d82cfd-fb42-4d0d-9cf5-bffde624c37&title=&width=297" alt="image.png"><br />以下 SQL 语句将 <strong>student</strong> 表和 <strong>student_score</strong> 表左连接：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  student.<span class="operator">*</span>,</span><br><span class="line">  student_score.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  student</span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> student_score</span><br><span class="line">  <span class="keyword">ON</span> student.student_id <span class="operator">=</span> student_score.student_id;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">------------+------+------------+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> student_id <span class="operator">|</span> name <span class="operator">|</span> student_id <span class="operator">|</span> subject <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------+------------+---------+-------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Tim  <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Math    <span class="operator">|</span>    <span class="number">80</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> Tim  <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">90</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Jim  <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Math    <span class="operator">|</span>    <span class="number">88</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> Jim  <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> English <span class="operator">|</span>    <span class="number">85</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">3</span> <span class="operator">|</span> Lucy <span class="operator">|</span>       <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+------+------------+---------+-------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>:::danger<br>注意：</p>
<ol>
<li>结果集中包含了 <strong>student</strong> 表的所有记录行。</li>
<li><strong>student_score</strong> 表中不包含 <strong>student_id &#x3D; 3</strong> 的记录行，因此结果几种最后一行中来自 <strong>student_score</strong> 的列的内容为 <strong>NULL</strong>。</li>
<li><strong>student_score</strong> 表存在多条 <strong>student_id</strong> 为 <strong>1</strong> 和 <strong>2</strong> 的记录，因此 <strong>student</strong> 表也产生了多行数据。<br>:::<br><a name="a8QUr"></a></li>
</ol>
<h3 id="右连接"><a href="#右连接" class="headerlink" title="右连接"></a>右连接</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1708745830650-09e81e20-19a1-4b2e-b264-c447e5c13f47.png#averageHue=%2385762f&clientId=u7d717928-d71a-4&from=paste&height=226&id=uab11f9af&originHeight=149&originWidth=220&originalType=binary&ratio=2&rotation=0&showTitle=false&size=14815&status=done&style=none&taskId=u992453f3-3e8a-4821-938a-d64bde9ac41&title=&width=334" alt="image.png"></p>
<p><a name="whWdd"></a></p>
<h2 id="UNION"><a href="#UNION" class="headerlink" title="UNION"></a>UNION</h2><p><strong>UNION</strong> 操作符用来合并两个 <strong>SELECT</strong> 语句的结果集。<strong>UNION</strong> 操作符的语法如下</p>
<blockquote>
<p>说明：</p>
<ul>
<li><strong>UNION</strong> 双目操作符，需要两个 <strong>SELECT</strong> 语句作为操作数。</li>
<li><strong>UNION</strong> 中的 <strong>SELECT</strong> 语句中的列数、列顺序必须相同。</li>
<li><strong>UNION</strong> 运算包括 <strong>UNION DISTINCT</strong> 和 <strong>UNION ALL</strong> 两种算法，其中 <strong>UNION DISTINCT</strong> 可以简写为 <strong>UNION</strong>。</li>
<li><strong>UNION DISTINCT</strong> 或 <strong>UNION</strong> 将过滤掉结果集中重复记录。</li>
<li><strong>UNION ALL</strong> 将返回结果集中的所有记录。</li>
<li>当对两个结果集进行 <strong>UNION</strong> 运算的时候，要保证每个结果集具有相同的列数。否则就会产生错误。</li>
<li><strong>UNION</strong> 运算取第一个参与运算的结果集的列名作为最终的列名。</li>
<li>可以使用 <strong>ORDER BY</strong> 对 <strong>UNION</strong> 运算的结果进行排序。</li>
</ul>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1708746607173-45643e76-82fd-4615-8d71-0ea3900be3df.png#averageHue=%23c3c4c3&clientId=u7d717928-d71a-4&from=paste&height=485&id=ucb799718&originHeight=1332&originWidth=1576&originalType=binary&ratio=2&rotation=0&showTitle=false&size=89741&status=done&style=none&taskId=uae3ec087-a29f-4250-a2ef-ec8965de8d3&title=&width=574" alt="image.png"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> a</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> b;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> v    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p><a name="ypUWJ"></a></p>
<h3 id="UNION-ALL"><a href="#UNION-ALL" class="headerlink" title="UNION ALL"></a>UNION ALL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> a</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> b;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> v    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">7</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>那么，如果我们想自定义列名，只需要为第一个结果集的列设定一个别名即可。请看下面的实例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">2</span> <span class="keyword">AS</span> c</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+---+</span><br><span class="line">| c |</span><br><span class="line">+---+</span><br><span class="line">| 2 |</span><br><span class="line">| 1 |</span><br><span class="line">+---+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><a name="r2CVD"></a></p>
<h2 id="满全连接"><a href="#满全连接" class="headerlink" title="满全连接"></a>满全连接</h2><p>用一个UNION来连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp e <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> dept d <span class="keyword">ON</span> e.deptno<span class="operator">=</span>d.deptno</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp e <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> dept d <span class="keyword">ON</span> e.deptno<span class="operator">=</span>d.deptno;</span><br></pre></td></tr></table></figure>

<p><a name="BpYY8"></a></p>
<h2 id="表别名"><a href="#表别名" class="headerlink" title="表别名"></a>表别名</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">		first_name `<span class="keyword">First</span> Name`,</span><br><span class="line">		last_name `<span class="keyword">Last</span> Name`,</span><br><span class="line">		CONCAT(first_name, <span class="string">&#x27;, &#x27;</span>, last_name) `<span class="keyword">Full</span> Name`</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">		actor</span><br><span class="line">LIMIT <span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+----------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">First</span> Name <span class="operator">|</span> <span class="keyword">Last</span> Name    <span class="operator">|</span> <span class="keyword">Full</span> Name            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+----------------------+</span></span><br><span class="line"><span class="operator">|</span> PENELOPE   <span class="operator">|</span> GUINESS      <span class="operator">|</span> PENELOPE, GUINESS    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> NICK       <span class="operator">|</span> WAHLBERG     <span class="operator">|</span> NICK, WAHLBERG       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ED         <span class="operator">|</span> CHASE        <span class="operator">|</span> ED, CHASE            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JENNIFER   <span class="operator">|</span> DAVIS        <span class="operator">|</span> JENNIFER, DAVIS      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JOHNNY     <span class="operator">|</span> LOLLOBRIGIDA <span class="operator">|</span> JOHNNY, LOLLOBRIGIDA <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+----------------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p><a name="pSpHP"></a></p>
<h1 id="INSERT"><a href="#INSERT" class="headerlink" title="INSERT"></a>INSERT</h1><p><strong>INSERT</strong> 语句的插入单行数据语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name (column_1, column_2, ...)</span><br><span class="line"><span class="keyword">VALUES</span> (value_1, value_2, ...);</span><br></pre></td></tr></table></figure>
<p><strong>INSERT</strong> 语句的插入多行数据语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name (column_1, column_2, ...)</span><br><span class="line"><span class="keyword">VALUES</span> (value_11, value_12, ...),</span><br><span class="line">       (value_21, value_22, ...)</span><br><span class="line">       ...;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>说明：</p>
<ul>
<li><strong>INSERT INTO</strong> 和 <strong>VALUES</strong> 都是关键字。</li>
<li><strong>INSERT INTO</strong> 后跟表名 <strong>table_name</strong>。</li>
<li>表名 <strong>table_name</strong> 后跟要插入数据的列名列表。列名放在小括号中，多个列表使用逗号分隔。</li>
<li><strong>VALUES</strong> 关键字之后的小括号中是值列表。值的数量要和字段的数量相同。值的位置和列的位置一一对应。</li>
<li>当插入多行数据时，多个值列表之间使用逗号分隔。</li>
<li><strong>INSERT</strong> 语句返回插入的行数。</li>
</ul>
</blockquote>
<p><a name="jIsy1"></a></p>
<h3 id="INSERT-修饰符"><a href="#INSERT-修饰符" class="headerlink" title="INSERT 修饰符"></a><br />INSERT 修饰符</h3><p>在 MySQL 中， <strong>INSERT</strong> 语句支持 4 个修饰符:</p>
<ul>
<li><strong>LOW_PRIORITY</strong>: 如果你指定了 <strong>LOW_PRIORITY</strong> 修饰符，MySQL 服务器将延迟执行 <strong>INSERT</strong> 操作直到没有客户端对表进行读操作。<strong>LOW_PRIORITY</strong> 修饰符影响那些只支持表级锁的存储引擎，比如： <strong>MyISAM</strong>, <strong>MEMORY</strong>, 和 <strong>MERGE</strong>。</li>
<li><strong>HIGH_PRIORITY</strong>: 如果你指定了 <strong>HIGH_PRIORITY</strong> 修饰符，它会覆盖掉服务器启动时的 <strong>–low-priority-updates</strong> 选项。<strong>HIGH_PRIORITY</strong> 修饰符影响那些只支持表级锁的存储引擎，比如： <strong>MyISAM</strong>, <strong>MEMORY</strong>, 和 <strong>MERGE</strong>。</li>
<li><strong>IGNORE</strong>: 如果你指定了 <strong>IGNORE</strong> 修饰符，MySQL 服务器会在执行 <strong>INSERT</strong> 操作期间忽略那些可忽略的错误。这些错误最终会作为 <strong>WARNING</strong> 返回。</li>
<li><strong>DELAYED</strong>: 这个修饰符已经在 MySQL 5.6 版本中弃用，将来会被删除。在 MySQL 8.0 中，这个修饰符可用但会被忽略。<br><a name="g1YoY"></a></li>
</ul>
<h1 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h1><p>如果要从数据库表中删除记录行，请使用 <strong>DELETE</strong> 语句。 <strong>DELETE</strong> 语句单表删除语法如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name</span><br><span class="line">[<span class="keyword">WHERE</span> clause]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> ...]</span><br><span class="line">[LIMIT row_count]</span><br></pre></td></tr></table></figure>
<p>:::tips<br>说明：</p>
<ul>
<li><strong>DELETE FROM</strong> 后跟的是要从中删除数据的表。</li>
<li><strong>WHERE</strong> 子句用来过滤需要删除的行。满足条件的行会被删除。</li>
<li><strong>WHERE</strong> 子句是可选的。没有 <strong>WHERE</strong> 子句时，<strong>DELETE</strong> 语句将删除表中的所有行。</li>
<li><strong>ORDER BY</strong> 子句用来指定删除行的顺序。它是可选的。</li>
<li><strong>LIMIT</strong> 子句用来指定删除的最大行数。它是可选的。</li>
<li><strong>DELETE</strong> 语句返回删除的行数。<br>:::<br><a name="ap2PP"></a></li>
</ul>
<h2 id="限制删除的最大行数"><a href="#限制删除的最大行数" class="headerlink" title="限制删除的最大行数"></a>限制删除的最大行数</h2><p>例如考虑以下这些需求：</p>
<ul>
<li>删除排名最靠后的 5 个成绩</li>
<li>删除最新注册的 10 名用户</li>
</ul>
<p>这时，我们可以结合使用 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/order-by/">ORDER BY</a> 和 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/limit/">LIMIT</a> 子句。<br />以下语句用来删除 <strong>actor_copy</strong> 中 <strong>actor_id</strong> 最大的 10 行：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> actor_copy</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> actor_id <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 10 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure>
<p>如果单独使用 <strong>LIMIT</strong> 子句，删除的顺序是不明确的。大多数情况下， <strong>DELETE</strong> 语句中的 <strong>LIMIT</strong> 子句都应该和 <strong>ORDER BY</strong> 子句一起使用。</p>
<p>如果你只是想清空表，可以使用 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/table-truncate/">TRUNCATE TABLE</a> 语句以获得更好的性能。如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> actor_copy;</span><br></pre></td></tr></table></figure>
<p><a name="dcX4Q"></a></p>
<h2 id="DELETE-多表删除"><a href="#DELETE-多表删除" class="headerlink" title="DELETE 多表删除"></a><strong>DELETE</strong> 多表删除</h2><p>我们也可以在一个 <strong>DELETE</strong> 语句中指定多个表，以便在一个或多个表中删除符合 <strong>WHERE</strong> 子句中的条件的行。</p>
<ul>
<li><p>以下语句删除 <strong>t1</strong> 和 <strong>t2</strong> 表中满足条件的行：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> t1, t2</span><br><span class="line"><span class="keyword">FROM</span> t1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> t2</span><br><span class="line"><span class="keyword">WHERE</span> t1.id <span class="operator">=</span> t2.id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>以下语句删除 <strong>t1</strong> 表中满足条件的行：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> t1</span><br><span class="line"><span class="keyword">FROM</span> t1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> t2</span><br><span class="line"><span class="keyword">WHERE</span> t1.id <span class="operator">=</span> t2.id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>以下语句在删除时使用 <strong>LEFT JOIN</strong>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> t1</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  t1 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> t2 <span class="keyword">ON</span> t1.id <span class="operator">=</span> t2.id</span><br><span class="line"><span class="keyword">WHERE</span> t2.id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>只要是 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/select/">SELECT</a> 语句中允许使用的 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/join/">JOIN</a> 类型，多表删除语句都可以使用。<br />多表删除语句中不能使用 <strong>LIMIT</strong> 子句和 <strong>ORDER BY</strong> 子句。<br><a name="cJwLf"></a></p>
</li>
</ul>
<h1 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a><br />UPDATE</h1><p><strong>UPDATE</strong> 语句可以更新表中的一行或者多行数据，可以更新表中的一个或者多个字段（列）。 以下是 <strong>UPDATE</strong> 语句的基本语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> [IGNORE] table_name</span><br><span class="line"><span class="keyword">SET</span></span><br><span class="line">    column_name1 <span class="operator">=</span> value1,</span><br><span class="line">    column_name2 <span class="operator">=</span> value2,</span><br><span class="line">    ...</span><br><span class="line">[<span class="keyword">WHERE</span> clause];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>用法说明：</p>
<ul>
<li><strong>UPDATE</strong> 关键字后指定要更新数据的表名。</li>
<li>使用 <strong>SET</strong> 子句设置字段的新值。多个字段使用逗号分隔。字段的值可以是普通的字面值，也可以是表达式运算，还可以是子查询。</li>
<li>使用 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/where/">WHERE</a> 子句指定要更新的行。只有符合 <strong>WHERE</strong> 条件的行才会被更新。</li>
<li><strong>WHERE</strong> 子句是可选的。如果不指定 <strong>WHERE</strong> 子句，则更新表中的所有行。</li>
</ul>
</blockquote>
<p><strong>UPDATE</strong> 语句中的 <strong>WHERE</strong> 子句非常重要。除非您特意，否则不要省略 <strong>WHERE</strong> 子句。</p>
<p><a name="uFO4I"></a></p>
<h3 id="使用子查询更新"><a href="#使用子查询更新" class="headerlink" title="使用子查询更新"></a>使用子查询更新</h3><p>下面实例展示了如何为没有绑定商店的客户绑定一个随机商店。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> customer</span><br><span class="line"><span class="keyword">SET</span> store_id <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> store_id</span><br><span class="line">    <span class="keyword">FROM</span> store</span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> RAND()</span><br><span class="line">    LIMIT <span class="number">1</span></span><br><span class="line">  )</span><br><span class="line"><span class="keyword">WHERE</span> store_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<p><a name="ECnIO"></a></p>
<h1 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a><br />GROUP BY</h1><p><strong>GROUP BY</strong> 子句用于将结果集根据指定的字段或者表达式进行分组。</p>
<blockquote>
<p>有时候，我们需要将结果集按照某个维度进行汇总。这在统计数据的时候经常用到，考虑以下的场景：</p>
<ul>
<li>按班级求取平均成绩。</li>
<li>按学生汇总某个人的总分。</li>
<li>按年或者月份统计销售额。</li>
<li>按国家或者地区统计用户数量。</li>
</ul>
</blockquote>
<p>这些正是 <strong>GROUP BY</strong> 子句发挥作用的地方。</p>
<p><strong>在使用GROUP BY时，SELECT</strong> 后的字段必须是分组字段中的字段。		<br />**在SELECT列表中所有未包含在组函数中的列都应该包含在 GROUP BY子句中 **<br />举个例子：<br />需求：查询各个部门的平均工资<br />错误写法❌(这种写法会将整个表的平均工资求出来)：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employee;</span><br></pre></td></tr></table></figure>
<p>正确写法✅：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id, <span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employee</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>
<p><a name="iFL2J"></a></p>
<h3 id="GROUP-BY-与聚合函数实例"><a href="#GROUP-BY-与聚合函数实例" class="headerlink" title="GROUP BY 与聚合函数实例"></a>GROUP BY 与聚合函数实例</h3><p>我们使用 <strong>GROUP BY</strong> 子句和聚合函数 <strong>COUNT()</strong> 查看 <strong>actor</strong> 表中的姓氏列表以及每个姓氏的次数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name, <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> actor</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> last_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+--------------+----------+</span><br><span class="line">| last_name    | COUNT(*) |</span><br><span class="line">+--------------+----------+</span><br><span class="line">| KILMER       |        5 |</span><br><span class="line">| NOLTE        |        4 |</span><br><span class="line">| TEMPLE       |        4 |</span><br><span class="line">| AKROYD       |        3 |</span><br><span class="line">| ALLEN        |        3 |</span><br><span class="line">| BERRY        |        3 |</span><br><span class="line">...</span><br><span class="line">| WRAY         |        1 |</span><br><span class="line">+--------------+----------+</span><br><span class="line">121 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>本例中，执行的顺序如下：</p>
<ol>
<li>首先使用 <strong>GROUP BY</strong> 子句按照 <strong>last_name</strong> 字段对数据进行分组。</li>
<li>然后使用聚合函数 <strong>COUNT(*)</strong> 汇总每个姓氏的行数。</li>
<li>最后使用 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/order-by/">ORDER BY</a> 子句按照 <strong>COUNT(*)</strong> 降序排列。</li>
</ol>
<p>这样，数量最多的姓氏排在最前面。</p>
<p><a name="oc4qV"></a></p>
<h3 id="GROUP-BY-LIMIT-聚合函数实例"><a href="#GROUP-BY-LIMIT-聚合函数实例" class="headerlink" title="GROUP BY, LIMIT, 聚合函数实例"></a>GROUP BY, LIMIT, 聚合函数实例</h3><p>以下实例使用 <strong>GROUP BY</strong> 子句，<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/limit/">LIMIT</a> 子句和聚合函数 <strong>SUM()</strong> 返回总消费金额排名前 10 位的客户。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id, <span class="built_in">SUM</span>(amount) total</span><br><span class="line"><span class="keyword">FROM</span> payment</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> customer_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> total <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+-------------+--------+</span><br><span class="line">| customer_id | total  |</span><br><span class="line">+-------------+--------+</span><br><span class="line">|         526 | 221.55 |</span><br><span class="line">|         148 | 216.54 |</span><br><span class="line">|         144 | 195.58 |</span><br><span class="line">|         137 | 194.61 |</span><br><span class="line">|         178 | 194.61 |</span><br><span class="line">|         459 | 186.62 |</span><br><span class="line">|         469 | 177.60 |</span><br><span class="line">|         468 | 175.61 |</span><br><span class="line">|         236 | 175.58 |</span><br><span class="line">|         181 | 174.66 |</span><br><span class="line">+-------------+--------+</span><br><span class="line">10 rows in set (0.02 sec)</span><br></pre></td></tr></table></figure>
<p>本例中，执行的顺序如下：</p>
<ol>
<li>首先使用 <strong>GROUP BY</strong> 子句按照 <strong>customer_id</strong> 字段对数据进行分组。</li>
<li>然后使用聚合函数 <strong>SUM(amount)</strong> 汇总每个客户的 <strong>amount</strong> 字段，并使用 <strong>total</strong> 作为<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/alias/">别名</a>。</li>
<li>然后使用 <strong>ORDER BY</strong> 子句按照 <strong>total</strong> 降序排列。</li>
<li>最后使用 <strong>LIMIT 10</strong> 子句返回前 10 个记录行。</li>
</ol>
<p><a name="r3GVF"></a></p>
<h1 id="HAVING"><a href="#HAVING" class="headerlink" title="HAVING"></a>HAVING</h1><p><a name="By3bN"></a></p>
<h2 id="HAVING-聚合函数注意事项："><a href="#HAVING-聚合函数注意事项：" class="headerlink" title="HAVING+聚合函数注意事项："></a>HAVING+聚合函数注意事项：</h2><ol>
<li>如果过滤条件中使用了聚合函数，则必须使用HAVING来替换WHERE。否则，报错。</li>
<li>HAVING 必须声明在 GROUP BY 后面。</li>
<li>开发中我们使用HAVING的前提是SQL中使用了GROUP BY。</li>
</ol>
<p>错误实例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> department_id, <span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> <span class="built_in">MAX</span>(salary) <span class="operator">&gt;</span> <span class="number">100000</span> #这句出错</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>
<p>正确写法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> department_id, <span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary) <span class="operator">&gt;</span> <span class="number">100000</span>;</span><br></pre></td></tr></table></figure>
<p><strong>练习：查询部门id为10，20， 30， 40这4个部门中最高工资比10000高的部门信息</strong><br /><strong>方式1: 推荐 执行效率更高！！！</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> department_id, <span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span> (<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary) <span class="operator">&gt;</span> <span class="number">100000</span>;</span><br></pre></td></tr></table></figure>
<p><strong>方式2:</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> department_id, <span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MAX</span>(salary) <span class="operator">&gt;</span> <span class="number">100000</span> <span class="keyword">AND</span> department_id <span class="keyword">IN</span> (<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>);</span><br></pre></td></tr></table></figure>
<p><a name="hvKgF"></a></p>
<h3 id="结论："><a href="#结论：" class="headerlink" title="结论："></a>结论：</h3><ul>
<li>当过滤条件有聚合函数时，则此过滤条件必须声明在HAVING中。</li>
<li>当过滤条件中没有聚合函数时，则此过滤条件声明在WHERE中或HAVING中均可。但是，建议声明在WHERE中。</li>
</ul>
<blockquote>
<p><a name="N8S3f"></a></p>
</blockquote>
<h2 id="WHERE-与-HAVING-对比"><a href="#WHERE-与-HAVING-对比" class="headerlink" title="WHERE 与 HAVING 对比"></a>WHERE 与 HAVING 对比</h2><blockquote>
<ul>
<li>适用范围：HAVING适用范围更广</li>
<li>过滤条件🈚️聚合函数，这种情况下，WHERE执行效率高于HAVING</li>
<li>**如果需要通过连接从关联表中获取需要的数据，WHERE 是先筛选后连接，而 HAVING 是先连接 后筛选。 **这一点，就决定了在关联查询中，WHERE 比 HAVING 更高效。因为 WHERE 可以先筛选，用一 个筛选后的较小数据集和关联表进行连接，这样占用的资源比较少，执行效率也比较高。HAVING 则需要 先把结果集准备好，也就是用未被筛选的数据集进行关联，然后对这个大的数据集进行筛选，这样占用 的资源就比较多，执行效率也较低。</li>
</ul>
<p> 			</p>
</blockquote>
<p><a name="J44zj"></a></p>
<h1 id="SQL底层执行原理"><a href="#SQL底层执行原理" class="headerlink" title="SQL底层执行原理"></a>SQL底层执行原理</h1><p><a name="qjczU"></a></p>
<h2 id="SELECT语句完整结构"><a href="#SELECT语句完整结构" class="headerlink" title="SELECT语句完整结构"></a>SELECT语句完整结构</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ... , ...(存在聚合函数)</span><br><span class="line"><span class="keyword">FROM</span> ... , ... , ...</span><br><span class="line"><span class="keyword">WHERE</span> 多表的连接条件 <span class="keyword">AND</span> 不包含聚合函数的过滤条件</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ... , ...</span><br><span class="line"><span class="keyword">HAVING</span> 包含聚合函数的过滤条件</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ... , ... (<span class="keyword">ASC</span> <span class="operator">/</span> <span class="keyword">DESC</span>)</span><br><span class="line">LIMIT ... , ...</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ... , ...(存在聚合函数)</span><br><span class="line"><span class="keyword">FROM</span> ...(<span class="keyword">LEFT</span> <span class="operator">/</span> <span class="keyword">RIGHT</span>) <span class="keyword">JOIN</span> ... <span class="keyword">ON</span> 多表的连接条件</span><br><span class="line"><span class="keyword">JOIN</span> ... <span class="keyword">ON</span></span><br><span class="line"><span class="keyword">WHERE</span> 不包含聚合函数的过滤条件</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ... , ...</span><br><span class="line"><span class="keyword">HAVING</span> 包含聚合函数的过滤条件</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ... , ... (<span class="keyword">ASC</span> <span class="operator">/</span> <span class="keyword">DESC</span>)</span><br><span class="line">LIMIT ... , ...</span><br></pre></td></tr></table></figure>
<p><a name="zmFH2"></a></p>
<h2 id="SQL语句执行过程"><a href="#SQL语句执行过程" class="headerlink" title="SQL语句执行过程"></a>SQL语句执行过程</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ...(<span class="keyword">LEFT</span> <span class="operator">/</span> <span class="keyword">RIGHT</span>) <span class="keyword">JOIN</span> ... <span class="keyword">ON</span> 多表的连接条件</span><br><span class="line"><span class="keyword">JOIN</span> ... <span class="keyword">ON</span></span><br><span class="line"><span class="keyword">WHERE</span> 不包含聚合函数的过滤条件</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ... , ...</span><br><span class="line"><span class="keyword">HAVING</span> 包含聚合函数的过滤条件</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ... , ...(存在聚合函数)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ... , ... (<span class="keyword">ASC</span> <span class="operator">/</span> <span class="keyword">DESC</span>)</span><br><span class="line">LIMIT ... , ...</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1708844928911-9f6328fa-324c-4cd7-ab81-4d014dc7f124.png#averageHue=%23f2f2f1&clientId=u7754751c-0850-4&from=paste&height=483&id=ued5556a1&originHeight=966&originWidth=1170&originalType=binary&ratio=2&rotation=0&showTitle=false&size=312484&status=done&style=none&taskId=uf9a31545-2679-414b-b9b9-5c4f7a345dc&title=&width=585" alt="image.png"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ...,... <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ON</span> <span class="operator">-</span><span class="operator">&gt;</span> (<span class="keyword">LEFT</span> <span class="operator">/</span> <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span>)</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">WHERE</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">HAVING</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">DISTINCT</span></span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">-</span><span class="operator">&gt;</span> LIMIT</span><br></pre></td></tr></table></figure>
<p> SELECT 之前可以理解为表行数上的过滤，而SELECT是对我们列上的过滤<br><a name="w1bkM"></a></p>
<h2 id="执行步骤详解："><a href="#执行步骤详解：" class="headerlink" title="执行步骤详解："></a>执行步骤详解：</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1708845057334-f441a7fd-2ac1-487a-9212-8c7b67b75321.png#averageHue=%23fefefe&clientId=u7754751c-0850-4&from=paste&height=233&id=cRObU&originHeight=466&originWidth=1652&originalType=binary&ratio=2&rotation=0&showTitle=false&size=189678&status=done&style=none&taskId=u695ccc9f-7b45-4639-b5f6-4fd99ba7b5b&title=&width=826" alt="image.png"> <img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1708845075857-f0415a57-eb76-4cee-a62e-5cf280e8b69d.png#averageHue=%23fcfafa&clientId=u7754751c-0850-4&from=paste&height=465&id=u2f14d26d&originHeight=930&originWidth=1652&originalType=binary&ratio=2&rotation=0&showTitle=false&size=330244&status=done&style=none&taskId=u92937bf1-ebd8-451d-8f12-5e4d018abdd&title=&width=826" alt="image.png"><br /> 				<br><a name="G61QP"></a></p>
<h1 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h1><p><a name="LUpiZ"></a></p>
<h2 id="子查询与-IN"><a href="#子查询与-IN" class="headerlink" title="子查询与 IN"></a>子查询与 IN</h2><p>在这个例子中，我们使用来自 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/sakila/">Sakila 示例数据库</a>中的 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/sakila/table-language/">language</a> 和 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/sakila/table-film/">film</a> 表作为演示。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">language</span></span><br><span class="line"><span class="keyword">WHERE</span> language_id <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> language_id</span><br><span class="line">    <span class="keyword">FROM</span> film</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+-------------+---------+---------------------+</span><br><span class="line">| language_id | name    | last_update         |</span><br><span class="line">+-------------+---------+---------------------+</span><br><span class="line">|           1 | English | 2006-02-15 05:02:19 |</span><br><span class="line">+-------------+---------+---------------------+</span><br><span class="line">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<p><a name="i5L3e"></a></p>
<h2 id="派生表"><a href="#派生表" class="headerlink" title="派生表"></a>派生表</h2><p>当一个子查询位于 <strong>FORM</strong> 子句中时，这个子查询被称为派生表。<br />让我们看一下下面这个语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> last_name,</span><br><span class="line">      <span class="built_in">COUNT</span>(<span class="operator">*</span>) count</span><br><span class="line">    <span class="keyword">FROM</span> actor</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> last_name</span><br><span class="line">  ) t</span><br><span class="line"><span class="keyword">WHERE</span> t.last_name <span class="keyword">LIKE</span> <span class="string">&#x27;A%&#x27;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+-----------+-------+</span><br><span class="line">| last_name | count |</span><br><span class="line">+-----------+-------+</span><br><span class="line">| AKROYD    |     3 |</span><br><span class="line">| ALLEN     |     3 |</span><br><span class="line">| ASTAIRE   |     1 |</span><br><span class="line">+-----------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>请注意下面的语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,</span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>) count</span><br><span class="line"><span class="keyword">FROM</span> actor</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> last_name</span><br></pre></td></tr></table></figure>
<p>这是一个派生表，并且它有一个别名 <strong>t</strong>。派生表必须使用别名，因为 MySQL 规定，任何 <strong>FORM</strong> 子句中的表必须具有一个名字。<br />请注意，派生表不是临时表。<br />派生表遵循以下规则：</p>
<ul>
<li>派生表必须具有别名。</li>
<li>派生表的列名必须是唯一的。</li>
</ul>
<p><a name="nxJfe"></a></p>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><p><a name="vBvZM"></a></p>
<h2 id="VARCHAR"><a href="#VARCHAR" class="headerlink" title="VARCHAR"></a>VARCHAR</h2><p>在 MySQL 中， <strong>VARCHAR</strong> 是可变长度的字符串类型，这与 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/char/">CHAR数据类型</a>有所不同。当一个列的类型定义为 <strong>VARCHAR</strong> 类型后，列中的内容的长度就是内容本身的长度（字符数）。<br><a name="T7EFb"></a></p>
<h2 id="MySQL-VARCHAR-语法"><a href="#MySQL-VARCHAR-语法" class="headerlink" title="MySQL VARCHAR 语法"></a>MySQL VARCHAR 语法</h2><p>当我们使用 <strong>VARCHAR</strong> 数据类型时，我们需要指定一个最大的长度。其语法如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">VARCHAR</span>(max_length)</span><br></pre></td></tr></table></figure>
<p>其中 <strong>max_length</strong> 是一个数值，它指示了此列的最大字符数。如果我们不指定此值，则默认值是 <strong>255</strong>。也就是说 <strong>VARCHAR</strong> 等同于 **VARCHAR(255)**。<br />MySQL 存储 <strong>VARCHAR</strong> 数值时，会将最前的 1 或者 2 个字节存储为实际字符串内容的长度。如果列的值少于 255 个字节，则长度前缀为 1 个字节，否则为 2 个字节。<br /><strong>VARCHAR</strong> 允许的最大长度为 <strong>65535</strong> 个字节，这也是 MySQL 中的行大小的限制。<br><a name="hzOgu"></a></p>
<h2 id="VARCHAR-截断内容"><a href="#VARCHAR-截断内容" class="headerlink" title="VARCHAR 截断内容"></a>VARCHAR 截断内容</h2><p>当插入的内容超过 <strong>VARCHAR</strong> 列定义的长度时，MySQL 会采用如下策略：</p>
<ul>
<li>如果超过的部分只包含空格，则多余的空格会被截断。</li>
<li>如果超过的部分不只是空格，则给出错误提示。</li>
</ul>
<p>让我们先创建一个测试表，只有一个字段 <strong>v</strong>，且定义为 **VARCHAR(2)**：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test_varchar (v <span class="type">VARCHAR</span>(<span class="number">2</span>))</span><br><span class="line"><span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="string">&#x27;latin1&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>让我们插入一个值 **’A ‘**，它包含 2 个空格，总长度为 3。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_varchar</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;A  &#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 row(s) affected, 1 warning(s): 1265 Data truncated for column &#x27;v&#x27; at row 1</span><br></pre></td></tr></table></figure>
<p>此时插入成功，但是 MySQL 给出了截断提示。<br />让我们再一个值 **’ABC’**，它的长度为 3。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_varchar</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;ABC&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error Code: 1406. Data too long for column &#x27;v&#x27; at row 1</span><br></pre></td></tr></table></figure>
<p>这里，插入数据失败。</p>
<p><a name="nYO8w"></a></p>
<h2 id="CHAR"><a href="#CHAR" class="headerlink" title="CHAR"></a>CHAR</h2><p>在 MySQL 中， CHAR 是固定长度的字符串类型，这与 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/varchar/">VARCHAR数据类型</a>有所不同。当一个列的类型定义为 CHAR 类型后，列中的内容的长度就是字段定义的长度（字符数）。</p>
<p><a name="K71VZ"></a></p>
<h2 id="MySQL-CHAR-语法"><a href="#MySQL-CHAR-语法" class="headerlink" title="MySQL CHAR 语法"></a>MySQL CHAR 语法</h2><p>当我们使用 <strong>CHAR</strong> 数据类型时，我们需要指定一个长度。其语法如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">CHAR</span>(length)</span><br></pre></td></tr></table></figure>
<p>:::success<br>这里：</p>
<ul>
<li><strong>length</strong> 是一个数值，它指示了此列的字符数。</li>
<li><strong>length</strong> 可以是 <strong>0</strong> 到 <strong>255</strong> 之间的任何值。</li>
<li>如果我们不指定此值，则默认值是 <strong>1</strong>。也就是说 <strong>CHAR</strong> 等同于 **CHAR(1)**。</li>
</ul>
<p>如果您写入 <strong>CHAR</strong> 列中的字符串的长度小于指定的字符长度，MySQL 会在源字符串后填充空格一直到指定的长度。当您读取 <strong>CHAR</strong> 列中的值时，MySQL 会删除后面的空格。<br />由于 <strong>CHAR</strong> 数据类型采用固定的长度进行存储，因此 <strong>CHAR</strong> 的性能要比 <strong>VARCHAR</strong> 更好。<br>:::<br><a name="fkDwz"></a></p>
<h3 id="后缀空格问题"><a href="#后缀空格问题" class="headerlink" title="后缀空格问题"></a>后缀空格问题</h3><p>现在，让我们插入一个前后带空格的值 <strong>‘ Tom ‘</strong> 到列中：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_char <span class="keyword">VALUES</span>(<span class="string">&#x27; Tom &#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>让我们再看一下结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------------+</span><br><span class="line">| name  | LENGTH(name) |</span><br><span class="line">+-------+--------------+</span><br><span class="line">| Harve |            5 |</span><br><span class="line">| Tim   |            3 |</span><br><span class="line">|  Tom  |            4 |</span><br><span class="line">+-------+--------------+</span><br></pre></td></tr></table></figure>
<p>这里，**’ Tom ‘** 变成了 **’ Tom’**。这是因为 MySQL 会删除 <strong>CHAR</strong> 值的后面的空格，不论这个空格是否是原来的。<br />也就是说 MySQL 会忽略字符串尾部的空格。比如 <strong>‘Tom’</strong> 是等同于 <strong>‘Tom ‘</strong> 或者 <strong>‘Tom ‘</strong> 的。<br />当一个 <strong>CHAR</strong> 列为唯一列时，这可能会带来问题。</p>
<p><a name="nV6lZ"></a></p>
<h3 id="插入超过长度的值"><a href="#插入超过长度的值" class="headerlink" title="插入超过长度的值"></a>插入超过长度的值</h3><p>让我们插入一个超过指定长度的 <strong>CHAR</strong> 值：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_char <span class="keyword">VALUES</span>(<span class="string">&#x27;Steven&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>MySQL 不会自动截断字符串，它将会返回如下的错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1406 (22001): Data too long for column &#x27;name&#x27; at row 1</span><br></pre></td></tr></table></figure>

<p><a name="AqmaY"></a></p>
<h2 id="INT"><a href="#INT" class="headerlink" title="INT"></a>INT</h2><p><a name="tOLOq"></a></p>
<h2 id="MySQL-INT-语法"><a href="#MySQL-INT-语法" class="headerlink" title="MySQL INT 语法"></a>MySQL INT 语法</h2><p>MySQL INT 类型使用起来简单，如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">INT</span> [UNSIGNED]</span><br></pre></td></tr></table></figure>
<p>这里： <strong>UNSIGNED</strong> 属性标识了此数据类型为无符号整数。</p>
<p><a name="LWZqS"></a></p>
<h2 id="MySQL-INT-数据类型实例"><a href="#MySQL-INT-数据类型实例" class="headerlink" title="MySQL INT 数据类型实例"></a>MySQL INT 数据类型实例</h2><p><strong>INT</strong> 数据类型列用来存储整数，比如年龄，数量等，它也可以结合 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/auto-increment/">AUTO_INCREMENT</a> 作为<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/primary-key/">主键</a>列。<br><a name="ntHYp"></a></p>
<h3 id="定义-INT-列并插入数据"><a href="#定义-INT-列并插入数据" class="headerlink" title="定义 INT 列并插入数据"></a>定义 INT 列并插入数据</h3><p>让我们看一下简单的整数列的例子。首先我们<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/table-create/">创建一个演示表</a>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test_int(</span><br><span class="line">    name <span class="type">char</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    age <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>上面 SQL 中的 <strong>INT</strong> 也可以使用 <strong>INTEGER</strong> 代替。<br />让我们<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/insert/">插入两条数据</a>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_int (name, age)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;23&#x27;</span>), (<span class="string">&#x27;Lucy&#x27;</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure>
<p><a name="JSvoI"></a></p>
<h3 id="使用-INT-列作为自增列"><a href="#使用-INT-列作为自增列" class="headerlink" title="使用 INT 列作为自增列"></a>使用 INT 列作为自增列</h3><p>通常，一个表的主键列使用 <strong>INT</strong> 数据类型列结合 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/auto-increment/">AUTO_INCREMENT</a> 属性作为主键。请看下面的 SQL：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test_int_pk(</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    name <span class="type">char</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    age <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>这里，<strong>id</strong> 列是主键列。它的类型是 <strong>INT</strong>，并且使用了 <strong>AUTO_INCREMENT</strong> 属性。<br />拓展链接：<a target="_blank" rel="noopener" href="https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/MySQL%E5%AE%9E%E6%88%98%E5%AE%9D%E5%85%B8/01%20%20%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B%EF%BC%9A%E9%81%BF%E5%85%8D%E8%87%AA%E5%A2%9E%E8%B8%A9%E5%9D%91.md">数字类型：避免自增踩坑</a><br><a name="xDyeo"></a></p>
<h2 id="DEMICAL"><a href="#DEMICAL" class="headerlink" title="DEMICAL"></a>DEMICAL</h2><p><a name="ry0bW"></a></p>
<h2 id="MySQL-DECIMAL-语法"><a href="#MySQL-DECIMAL-语法" class="headerlink" title="MySQL DECIMAL 语法"></a>MySQL DECIMAL 语法</h2><p>为了存储精确的数值，我们需要为 <strong>DECIMAL</strong> 数据类型指定总位数和小数位数。这里是 <strong>DECIMAL</strong> 数据类型的语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DECIMAL</span>[(M[,D])] [UNSIGNED] [ZEROFILL]</span><br></pre></td></tr></table></figure>
<p>这里：</p>
<ul>
<li><strong>M</strong> 是总的位数，不包含小数点和正负号。</li>
<li><strong>D</strong> 是小数部分的位数。如果 <strong>D</strong> 为 <strong>0</strong> 则表示没有小数部分。当 <strong>D</strong> 省略时，默认值为 <strong>0</strong>。</li>
<li><strong>UNSIGNED</strong> 属性表示数值是无符号的。无符号的数字不能是负数。</li>
<li><strong>ZEROFILL</strong> 属性表示当整数部分位数不足时，用整数的左侧用 <strong>0</strong> 填充。带有 <strong>ZEROFILL</strong> 的列将自动具有 <strong>UNSIGNED</strong> 属性。这和 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/int/">INT 数据类型</a>一样。</li>
</ul>
<p>比如，我们定义了如下一个列：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">amount <span class="type">DECIMAL</span>(<span class="number">9</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure>
<p>那么 <strong>amount</strong> 列的值的范围是从 <strong>-99999.9999</strong> 到 <strong>99999.9999</strong>。<br />比如，我们定义了如下一个列：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">amount <span class="type">DECIMAL</span>(<span class="number">9</span>);</span><br></pre></td></tr></table></figure>
<p>那么 <strong>amount</strong> 列的值的范围是从 <strong>-999999999</strong> 到 <strong>999999999</strong>。</p>
<p><a name="zBkch"></a></p>
<h2 id="MySQL-DECIMAL-实例"><a href="#MySQL-DECIMAL-实例" class="headerlink" title="MySQL DECIMAL 实例"></a>MySQL DECIMAL 实例</h2><p>首先，<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/table-create/">创建一个表</a> <strong>customer_balance</strong>，这个表有 3 列：<strong>id</strong>、<strong>name</strong> 和 <strong>balance</strong>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customer_balance (</span><br><span class="line">  id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  name <span class="type">VARCHAR</span>(<span class="number">255</span>),</span><br><span class="line">  balance <span class="type">DECIMAL</span>(<span class="number">14</span>, <span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>然后，<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/insert/">插入数据</a>到 <strong>materials</strong> 表中。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> customer_balance(name, balance)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;Tim&#x27;</span>, <span class="number">1500.04</span>),</span><br><span class="line">       (<span class="string">&#x27;Jim&#x27;</span>, <span class="number">10000</span>),</span><br><span class="line">       (<span class="string">&#x27;Tom&#x27;</span>, <span class="number">333333.4</span>);</span><br></pre></td></tr></table></figure>
<p>现在，让我们从 <strong>customer_balance</strong> 表中<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/select/">查询数据</a>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> customer_balance;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+----+------+-------------+</span><br><span class="line">| id | name | balance     |</span><br><span class="line">+----+------+-------------+</span><br><span class="line">|  1 | Tim  |   1500.0400 |</span><br><span class="line">|  2 | Jim  |  10000.0000 |</span><br><span class="line">|  3 | Tom  | 333333.4000 |</span><br><span class="line">+----+------+-------------+</span><br></pre></td></tr></table></figure>

<p><a name="tdOmo"></a></p>
<h2 id="BIT"><a href="#BIT" class="headerlink" title="BIT"></a>BIT</h2><p>在 MySQL 中 <strong>BIT</strong> 数据类型被用来存储二进制的位值。我们通常使用 <strong>BIT</strong> 数据类型的列存储状态值，比如布尔值等。 <strong>BIT</strong> 数据类型也是易于扩展的。<br><a name="kjesB"></a></p>
<h2 id="MySQL-BIT-语法"><a href="#MySQL-BIT-语法" class="headerlink" title="MySQL BIT 语法"></a>MySQL <strong>BIT</strong> 语法</h2><p>当我们使用 <strong>BIT</strong> 数据类型时，需要指定一个位数参数。这是语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BIT(M)</span><br></pre></td></tr></table></figure>
<p>这里:</p>
<ul>
<li><strong>BIT(M)</strong> 允许存储 <strong>M</strong> 位值。 <strong>M</strong> 的取值范围是 <strong>1</strong> 到 <strong>64</strong>。</li>
<li>如果不指定 <strong>M</strong>，那么它的默认值为 <strong>1</strong>。 <strong>BIT</strong> 等效于 **BIT(1)**。<br><a name="ZqHvw"></a></li>
</ul>
<h2 id="BIT-字面值"><a href="#BIT-字面值" class="headerlink" title="BIT 字面值"></a>BIT 字面值</h2><p>当我们需要向 <strong>BIT</strong> 列中插入 <strong>BIT</strong> 值时，需要使用 <strong>BIT</strong> 字面量。 <strong>BIT</strong> 字面量可以使用如下格式：</p>
<ul>
<li><strong>b’val’</strong></li>
<li><strong>B’val’</strong></li>
<li><strong>0bval</strong></li>
</ul>
<p>这里 <strong>val</strong> 是二进制值，它仅包含 <strong>0</strong> 和 <strong>1</strong>。例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">b<span class="string">&#x27;01&#x27;</span></span><br><span class="line">B<span class="string">&#x27;01&#x27;</span></span><br><span class="line"><span class="number">0</span>b01</span><br></pre></td></tr></table></figure>
<p>注意，前导 <strong>b</strong> 和 <strong>B</strong> 是等效的。但是 <strong>0b</strong> 是正确的前导符号，而 <strong>0B</strong> 不是正确的前导符号。下面是几个不正确的 <strong>BIT</strong> 字面值：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b<span class="string">&#x27;2&#x27;</span>    <span class="comment">-- 2 不是正确的 2 进制数</span></span><br><span class="line"><span class="number">0</span>B01    <span class="comment">-- 不能用 0B 前导，应使用 0b</span></span><br></pre></td></tr></table></figure>
<p><br /><strong>BIT</strong> 列非常适合用来存储状态值。在下例子中，我们将创建一个订单状态表 <strong>order_state</strong>，表中包含了一个用来存储订单状态的 <strong>state</strong> 列。我们先预设订单有如下状态：</p>
<table>
<thead>
<tr>
<th><strong>状态</strong></th>
<th><strong>状态十进制值</strong></th>
<th><strong>状态二进制值</strong></th>
</tr>
</thead>
<tbody><tr>
<td>待支付</td>
<td>0</td>
<td>000</td>
</tr>
<tr>
<td>已支付</td>
<td>1</td>
<td>001</td>
</tr>
<tr>
<td>待发货</td>
<td>2</td>
<td>010</td>
</tr>
<tr>
<td>已发货</td>
<td>3</td>
<td>011</td>
</tr>
<tr>
<td>已完成</td>
<td>4</td>
<td>100</td>
</tr>
</tbody></table>
<p>二进制值最大位数是 3 位，那么 <strong>state</strong> 列的数据类型可以使用 **state BIT(3)**。<br />我们使用下面的 sql 语句<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/table-create/">创建表</a>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> order_state (</span><br><span class="line">  order_id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  state BIT(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><a name="UnFjK"></a></p>
<h3 id="插入-BIT-值"><a href="#插入-BIT-值" class="headerlink" title="插入 BIT 值"></a>插入 <strong>BIT</strong> 值</h3><p>现在，让我我们插入一条状态为 <strong>3</strong> 的行，我们可以使用 <strong>3</strong>, <strong>b’011’</strong>, <strong>B’011’</strong>, <strong>0b011</strong> 其中的任意一个。如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> order_state (order_id, state)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="number">3</span>),</span><br><span class="line">       (<span class="number">2</span>, b<span class="string">&#x27;011&#x27;</span>),</span><br><span class="line">       (<span class="number">3</span>, B<span class="string">&#x27;011&#x27;</span>),</span><br><span class="line">       (<span class="number">4</span>, <span class="number">0</span>b011);</span><br></pre></td></tr></table></figure>
<p>现在让我通过以下 SQL <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/select/">查询</a> <strong>order_state</strong> 表中的所有行：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> order_state;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+----------+--------------+</span><br><span class="line">| order_id | state        |</span><br><span class="line">+----------+--------------+</span><br><span class="line">|        1 | 0x03         |</span><br><span class="line">|        2 | 0x03         |</span><br><span class="line">|        3 | 0x03         |</span><br><span class="line">|        4 | 0x03         |</span><br><span class="line">+----------+--------------+</span><br></pre></td></tr></table></figure>

<p><a name="GS2rv"></a></p>
<h2 id="DATA"><a href="#DATA" class="headerlink" title="DATA"></a>DATA</h2><p>MySQL <strong>DATE</strong> 使用 <strong>yyyy-mm-dd</strong> 格式来存储日期值。如果您想以其他的日期格式显示，比如 <strong>mm-dd-yyyy</strong>，您可以使用 <strong>DATE_FORMAT</strong> 函数将日期格式化为您需要的格式。<br />MySQL <strong>DATE</strong> 类型值的范围从 <strong>1000-01-01</strong> 到 <strong>9999-12-31</strong>。<br />当您向 <strong>DATE</strong> 列中插入值时，您可以使用 <strong>yyyy-mm-dd</strong> 或者 <strong>yy-mm-dd</strong> 格式。<br />在严格模式下，您不能插入无效日期，比如：<strong>2018-08-32</strong>。否则 MySQL 会给出错误。在非严格模式下，MySQL 会将无效日期转为 <strong>0000-00-00</strong>。</p>
<p><a name="ZD6Kj"></a></p>
<h2 id="MySQL-DATE-语法"><a href="#MySQL-DATE-语法" class="headerlink" title="MySQL DATE 语法"></a>MySQL <strong>DATE</strong> 语法</h2><p>以下是创建 <strong>DATE</strong> 列的语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">column_name <span class="type">DATE</span>;</span><br></pre></td></tr></table></figure>
<p>这里， 我们无需为 <strong>DATE</strong> 指定任何属性。<br><a name="h6qWq"></a></p>
<h2 id="MySQL-日期实例"><a href="#MySQL-日期实例" class="headerlink" title="MySQL 日期实例"></a>MySQL 日期实例</h2><p>上面我们说过，您可以将 <strong>yyyy-mm-dd</strong> 或者 <strong>yy-mm-dd</strong> 格式的日期值插入到 <strong>DATE</strong> 列中。<br />如果您使用两位数的年份值，MySQL 仍然按照以下规则将它转为四位数的年份值：</p>
<ul>
<li><strong>00-69</strong> 范围内的年份值将转换为 <strong>2000-2069</strong>。</li>
<li><strong>70-99</strong> 范围内的年份值将转换为 <strong>1970-1999</strong>。</li>
</ul>
<p>虽然规则时明确的，但是，具有两位数的日期值会给读取您代码的人带来困惑，因此应该避免使用两位数的年份。</p>
<p><a name="fgs3O"></a></p>
<h2 id="MySQL-DATE-函数"><a href="#MySQL-DATE-函数" class="headerlink" title="MySQL DATE 函数"></a>MySQL <strong>DATE</strong> 函数</h2><p>:::warning<br>MySQL 提供了许多有用的日期函数，允许您有效地操作日期。以下列出了常用的日期函数：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/now/">NOW()</a>: 获取当前日期和时间</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/curdate/">CURDATE()</a>: 获取当前日期</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/date/">DATE()</a>: 获取日期部分</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/date_format/">DATE_FORMAT()</a>: 格式化输出日期</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/datediff/">DATEDIFF()</a>: 计算两个日期之间的天数</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/date_add/">DATE_ADD()</a>: 在给定日期上增加给定的时间间隔</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/date_sub/">DATE_SUB()</a>: 在给定日期上减少给定的时间间隔</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/day/">DAY()</a>: 返回日期中天</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/month/">MONTH()</a>: 返回月份</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/quarter/">QUARTER()</a>: 返回季节</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/year/">YEAR()</a>: 返回年份</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/week/">WEEK()</a>: 函数返回给定日期是一年周的第几周</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/weekday/">WEEKDAY()</a>: 函数返回工作日索引</li>
<li><a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql-ref/weekofyear/">WEEKOFYEAR()</a>: 函数返回日历周<br>:::</li>
</ul>
<p><a name="ho6wT"></a></p>
<h3 id="DATE-FORMAT"><a href="#DATE-FORMAT" class="headerlink" title="DATE_FORMAT()"></a>DATE_FORMAT()</h3><p>要格式化日期值，请使用 <strong>DATE_FORMAT()</strong> 函数。以下语句使用日期格式模式 <strong>%m&#x2F;%d&#x2F;%Y</strong> 格式化当前日期：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_FORMAT(CURDATE(), <span class="string">&#x27;%m/%d/%Y&#x27;</span>) today;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+------------+</span><br><span class="line">| today      |</span><br><span class="line">+------------+</span><br><span class="line">| 03/25/2022 |</span><br><span class="line">+------------+</span><br></pre></td></tr></table></figure>

<p><a name="xZMNc"></a></p>
<h2 id="DATETIME"><a href="#DATETIME" class="headerlink" title="DATETIME"></a>DATETIME</h2><p>在 MySQL 中，您使用 <strong>DATETIME</strong> 来存储包含<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/date/">日期</a>和时间的值。当您从 <strong>DATETIME</strong> 列中<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/select/">查询数据</a> 时，MySQL <strong>DATETIME</strong> 列的值以下格式显示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">YYYY-MM-DD HH:MM:SS</span><br></pre></td></tr></table></figure>
<p>默认情况下， <strong>DATETIME</strong> 值范围从 <strong>1000-01-01 00:00:00</strong> 到 <strong>9999-12-31 23:59:59</strong> 。<br />一个 <strong>DATETIME</strong> 值使用 5 个字节进行存储。</p>
<p><a name="kSYwU"></a></p>
<h2 id="MySQL-日期时间与时间戳"><a href="#MySQL-日期时间与时间戳" class="headerlink" title="MySQL 日期时间与时间戳"></a>MySQL 日期时间与时间戳</h2><p>MySQL 提供了另一种类似于 <strong>DATETIME</strong> 的 时间数据类型 <strong>TIMESTAMP</strong> 。<br /><strong>TIMESTAMP</strong> 需要 4 个字节，而 <strong>DATETIME</strong> 需要 5 个字节。<strong>TIMESTAMP</strong> 和 <strong>DATETIME</strong> 二者都需要额外字节存储小数秒。<br /><strong>TIMESTAMP</strong> 值范围从 <strong>1970-01-01 00:00:01 UTC</strong> 到 <strong>2038-01-19 03:14:07 UTC</strong> 。如果要存储超过 2038 年的时间值，则应使用 <strong>DATETIME</strong> 代替 <strong>TIMESTAMP</strong> 。<br />MySQL <strong>TIMESTAMP</strong> 以 UTC 值存储。但是，MySQL 将 <strong>DATETIME</strong> 值按原样存储，没有时区。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> time_zone <span class="operator">=</span> <span class="string">&#x27;+03:00&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ts, dt</span><br><span class="line"><span class="keyword">FROM</span> timestamp_n_datetime;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+---------------------+---------------------+</span><br><span class="line">| ts                  | dt                  |</span><br><span class="line">+---------------------+---------------------+</span><br><span class="line">| 2022-03-28 05:52:15 | 2022-03-28 02:52:15 |</span><br><span class="line">+---------------------+---------------------+</span><br></pre></td></tr></table></figure>
<p><strong>TIMESTAMP</strong> 列中的值不同。这是因为 <strong>TIMESTAMP</strong> 当我们更改时区时， <strong>TIMESTAMP</strong> 列以 UTC 存储日期和时间值，该列的值会根据新时区进行调整。<br />这意味着如果您使用 <strong>TIMESTAMP</strong> 数据来存储日期和时间值，则在将数据库移动到位于不同时区的服务器时应该认真考虑。</p>
<p><a name="mZGDG"></a></p>
<h2 id="YEAR"><a href="#YEAR" class="headerlink" title="YEAR"></a>YEAR</h2><p>在 MySQL 中， <strong>YEAR</strong> 数据类型用来存储年份值。<br /><strong>YEAR</strong> 数据类型占用 1 个字节，<strong>YEAR</strong> 值的范围为从 <strong>1901</strong> 到 <strong>2155</strong>, 还有 <strong>0000</strong>。<br />定义为 <strong>YEAR</strong> 数据类型的列可以接受多种输入格式，包括：</p>
<ul>
<li>4 位数字的年份值，从 <strong>1901</strong> to <strong>2155</strong>。</li>
<li>4 位数字的年份值的字符串形式，从 <strong>‘1901’</strong> 到 **’2155’**。</li>
<li>2 位数字的年份值，从 <strong>0</strong> 到 <strong>99</strong>，并按如下规则转换为 4 位数年份：<ul>
<li><strong>1</strong> 到 <strong>69</strong> 转换为 <strong>2001</strong> 到 <strong>2069</strong>。</li>
<li><strong>70</strong> 到 <strong>99</strong> 转换为 <strong>1970</strong> 到 <strong>1999</strong>。</li>
<li><strong>0</strong> 转换为 <strong>0000</strong>。</li>
</ul>
</li>
<li>2 位数字的年份值的字符串形式，从 <strong>‘0’</strong> 到 **’99’**，并按如下规则转换为 4 位数年份：<ul>
<li><strong>‘0’</strong> 到 <strong>‘69’</strong> 转换为 <strong>2000</strong> 到 <strong>2069</strong>。</li>
<li><strong>‘70’</strong> 到 <strong>‘99’</strong> 转换为 <strong>1970</strong> 到 <strong>1999</strong>。</li>
</ul>
</li>
</ul>
<p>若未启用严格 SQL 模式，MySQL 会将无效的 <strong>YEAR</strong> 值转为 <strong>0000</strong>。在严格 SQL 模式下，插入无效的 <strong>YEAR</strong> 值时会产生错误。<br><a name="AGd3Y"></a></p>
<h2 id="MySQL-YEAR-实例"><a href="#MySQL-YEAR-实例" class="headerlink" title="MySQL YEAR 实例"></a>MySQL <strong>YEAR</strong> 实例</h2><p>让我通过一个实例看一下 <strong>YEAR</strong> 的用法。<br />首先，让我们<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/table-create/">创建表</a> <strong>test_year</strong>， 它有包含一个 <strong>YEAR</strong> 类型的列 <strong>created_year</strong>。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test_year(</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    created_year <span class="keyword">YEAR</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>接着，让我们使用 4 位数年份<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/insert/">插入一行</a>：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_year (created_year)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">2022</span>);</span><br></pre></td></tr></table></figure>
<p>然后，让我们使用 2 位数年份插入 2 行：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_year (created_year)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">10</span>), (<span class="number">98</span>);</span><br></pre></td></tr></table></figure>
<p>让我们再插入一个 <strong>0</strong> 值：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_year (created_year)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">0</span>), (<span class="string">&#x27;0&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>最后，让我们通过<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/select/">查询表中的数据</a>，验证一下是否插入正确：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test_year;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+----+--------------+</span><br><span class="line">| id | created_year |</span><br><span class="line">+----+--------------+</span><br><span class="line">|  1 |         2022 |</span><br><span class="line">|  2 |         2010 |</span><br><span class="line">|  3 |         1998 |</span><br><span class="line">|  4 |         0000 |</span><br><span class="line">|  5 |         2000 |</span><br><span class="line">+----+--------------+</span><br></pre></td></tr></table></figure>
<p>这里，我们可以看出，数字 <strong>0</strong> 转换为了 <strong>0000</strong>，而字符串 <strong>‘0’</strong> 转换为了 <strong>2000</strong>。</p>
<p>在 MySQL 中，一个 <strong>ENUM</strong> 是一个字符串的列表，它定义了一个列中允许的值，列的值只能是创建列时定义的允许值列表中的的一个。<br />MySQL <strong>ENUM</strong> 数据类型列适合存储状态和标识等有限数量的固定值的数据。<br />MySQL <strong>ENUM</strong> 数据类型具有以下优点：</p>
<ul>
<li>列值的可读性更强。</li>
<li>紧凑的数据存储。MySQL 存储 <strong>ENUM</strong> 时只存储枚举值对应的数字索引 (<strong>1</strong>, <strong>2</strong>, <strong>3</strong>, …)。<br><a name="ZniPs"></a></li>
</ul>
<h2 id="MySQL-ENUM-语法"><a href="#MySQL-ENUM-语法" class="headerlink" title="MySQL ENUM 语法"></a>MySQL <strong>ENUM</strong> 语法</h2><p>要是使用 <strong>ENUM</strong> 数据类型，这是它的语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ENUM (<span class="string">&#x27;v1&#x27;</span>, <span class="string">&#x27;v2&#x27;</span>, ..., <span class="string">&#x27;vn&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>这里，</p>
<ul>
<li><strong>ENUM</strong> 是一个关键字，用来声明一个枚举类型。</li>
<li><strong>v1</strong> 到 <strong>vn</strong> 是此 <strong>ENUM</strong> 类型的可选项列表，使用 <strong>ENUM</strong> 类型的列的值只能是上面值中的其中一个。</li>
<li>枚举值只能是字符串。</li>
</ul>
<p>要定义 <strong>ENUM</strong> 列，请使用以下语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line">(col_name ENUM (<span class="string">&#x27;v1&#x27;</span>,<span class="string">&#x27;v2&#x27;</span>, ..., <span class="string">&#x27;vn&#x27;</span>));</span><br></pre></td></tr></table></figure>
<p>在 <strong>ENUM</strong> 数据类型中，您可以拥有多个枚举值。但是，将枚举值的数量保持在 20 以下是一种很好的做法。</p>
<p><a name="uJOLR"></a></p>
<h3 id="插入-MySQL-ENUM-值"><a href="#插入-MySQL-ENUM-值" class="headerlink" title="插入 MySQL ENUM 值"></a>插入 MySQL ENUM 值</h3><p>要将<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/insert/">插入数据</a>到 <strong>ENUM</strong> 列中，请使用预定义列表中的枚举值。否则，MySQL 会给出错误。 例如，以下语句向 <strong>orders</strong> 表中插入一个新行。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orders(title, state)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;Apples&#x27;</span>, <span class="string">&#x27;Paid&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>除了枚举值，您还可以使用枚举成员的数字索引将数据插入到 <strong>ENUM</strong> 列中。例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orders(title, state)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;Bananas&#x27;</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>在这个例子中，我们没有使用 <strong>Paid</strong> 枚举值，而是使用了值 <strong>2</strong>。由于 <strong>Paid</strong> 的索引是 <strong>2</strong>，所以是可以接受的。<br />因为我们定义了 <strong>state</strong> 一个 <strong>NOT NULL</strong> 列，当你插入一个新行而不指定<strong>state</strong> 列的值时，MySQL 将使用第一个枚举成员作为默认值。请执行以下 SQL 语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> orders(title) <span class="keyword">VALUES</span>(<span class="string">&#x27;Oranges&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>这里，我们没有 state 列指定值，MySQL 将默认插入第一个枚举成员 <strong>Unpaid</strong>。<br><a name="UbS3M"></a></p>
<h2 id="MySQL-ENUM-的缺点"><a href="#MySQL-ENUM-的缺点" class="headerlink" title="MySQL ENUM 的缺点"></a>MySQL ENUM 的缺点</h2><p>MySQL <strong>ENUM</strong> 带来一些好处，比如可读性和存储效率，但是它也有以下缺点：</p>
<ol>
<li><p>更改枚举成员需要使用<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/table-alter/">ALTER TABLE</a> 语句重建整个表，这在资源和时间方面都是昂贵的。</p>
</li>
<li><p>获取完整的枚举列表很复杂，因为您需要访问 <strong>information_schema</strong> 数据库：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_type</span><br><span class="line"><span class="keyword">FROM</span> information_schema.COLUMNS</span><br><span class="line"><span class="keyword">WHERE</span> TABLE_NAME <span class="operator">=</span> <span class="string">&#x27;orders&#x27;</span></span><br><span class="line">    <span class="keyword">AND</span> COLUMN_NAME <span class="operator">=</span> <span class="string">&#x27;state&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>因为 <strong>ENUM</strong> 它不是 SQL 标准的，因此，移植到其他 RDBMS 可能是一个问题。</p>
</li>
<li><p>枚举列表是不可重用的。例如，上面 <strong>orders</strong> 表中的状态枚举值，不能重用到新建的其他表上。</p>
</li>
<li><p>枚举值是字符串，不能包含更多的信息。比如我们需要在每个订单状态上添加超时属性。<br><a name="lLJaB"></a></p>
</li>
</ol>
<h2 id="MySQL事务"><a href="#MySQL事务" class="headerlink" title="MySQL事务"></a><br />MySQL事务</h2><p><a name="uWFMe"></a></p>
<h3 id="事务的四个特性-ACID-【面试常考项】"><a href="#事务的四个特性-ACID-【面试常考项】" class="headerlink" title="事务的四个特性(ACID)【面试常考项】"></a>事务的四个特性(ACID)【面试常考项】</h3><p>:::danger<br>原子性（Atomicity）：指事务是一个不可分割的最小工作单位，事务中的操作只有都发生和都不发生两种情况<br />一致性（Consistency）：事务必须使数据库从一个一致状态变换到另外一个一致状态，举一个栗子，李二给王五转账50元，其事务就是让李二账户上减去50元，王五账户上加上50元；一致性是指其他事务看到的情况是要么李二还没有给王五转账的状态，要么王五已经成功接收到李二的50元转账。而对于李二少了50元，王五还没加上50元这个中间状态是不可见的。<br />隔离性（Isolation）：一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。<br />持久性（Durability）：一个事务一旦提交成功，它对数据库中数据的改变将是永久性的，接下来的其他操作或故障不应对其有任何影响。<br>:::</p>
<p><a name="CNPNk"></a></p>
<h3 id="脏读"><a href="#脏读" class="headerlink" title="脏读"></a>脏读</h3><p>在事务A修改数据之后提交数据之前，这时另一个事务B来读取数据，如果不加控制，事务B读取到A修改过数据，之后A又对数据做了修改再提交，则B读到的数据是脏数据，此过程称为脏读Dirty Read。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709122937825-5d0880c3-7cdb-4712-8f13-c8b321688340.png#averageHue=%23b7d79a&clientId=u6a7566a9-e1ca-4&from=paste&height=301&id=ud265524d&originHeight=602&originWidth=757&originalType=binary&ratio=2&rotation=0&showTitle=false&size=214202&status=done&style=none&taskId=u39b6590e-cde5-4b4f-b5f8-7f44acd6027&title=&width=378.5" alt="image.png"><br><a name="nCx2I"></a></p>
<h3 id="不可重复读"><a href="#不可重复读" class="headerlink" title="不可重复读"></a>不可重复读</h3><p>一个事务内在读取某些数据后的某个时间，再次读取以前读过的数据，却发现其读出的数据已经发生了变更、或者某些记录已经被删除了。<br /><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709122969986-6f07b472-9b90-4834-b15c-b28599c43e64.png#averageHue=%23b8d89b&clientId=u6a7566a9-e1ca-4&from=paste&height=301&id=uba286043&originHeight=602&originWidth=792&originalType=binary&ratio=2&rotation=0&showTitle=false&size=190758&status=done&style=none&taskId=uf642aefc-491b-4777-9fca-7073ef412af&title=&width=396" alt="image.png"><br><a name="tqamU"></a></p>
<h3 id="幻读"><a href="#幻读" class="headerlink" title="幻读"></a>幻读</h3><p>幻读是指在一个事务中执行了某个查询操作，然后在随后的操作中，另一个事务插入了一些满足前一个查询条件的新数据，这时再次执行相同的查询，就会发现多出了一些之前不存在的数据行。<br />幻读问题的根本原因在于，事务在查询数据的时候，其他事务可能会对数据做出插入、删除等操作，从而导致事务在隔离期间看到的数据发生变化。<br /><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709122693248-929f2190-35ed-4a80-aed6-59070b3db8c9.png#averageHue=%23b7d79b&clientId=u6a7566a9-e1ca-4&from=paste&height=276&id=ub2d5e305&originHeight=551&originWidth=822&originalType=binary&ratio=2&rotation=0&showTitle=false&size=197291&status=done&style=none&taskId=u567c790d-7760-4eec-bd2d-2037aa776ec&title=&width=411" alt="image.png"><br />在您的示例中，事务 A 在执行第一次 SELECT 操作后，事务 B 插入了一些新的数据行。由于事务 A 还没有提交，因此它可以看到事务 B 插入的数据行。当事务 A 再次执行 SELECT 操作时，就会发现多出了一些之前不存在的数据行。</p>
<p><a name="t3vat"></a></p>
<h3 id="不可重复读与幻读有什么区别？"><a href="#不可重复读与幻读有什么区别？" class="headerlink" title="不可重复读与幻读有什么区别？"></a>不可重复读与幻读有什么区别？</h3><blockquote>
<ul>
<li>不可重复读的重点是修改：在同一事务中，同样的条件，第一次读的数据和第二次读的「数据不一样」。（因为中间有其他事务提交了修改）</li>
<li>幻读的重点在于新增或者删除：在同一事务中，同样的条件，第一次和第二次读出来的「记录数不一样」。（因为中间有其他事务提交了插入&#x2F;删除）</li>
</ul>
</blockquote>
<p><a name="Sm3Qg"></a></p>
<h2 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709195377513-34ae277b-7eb6-4acb-bfe9-d0b1ef438c29.png#averageHue=%23d8e5ae&clientId=u180aaf93-d6bf-4&from=paste&height=111&id=u7da588e2&originHeight=221&originWidth=572&originalType=binary&ratio=2&rotation=0&showTitle=false&size=105061&status=done&style=none&taskId=u9c29e8d2-08a8-4ae9-a897-8c1080c7ebc&title=&width=286" alt="image.png"></p>
<p><a name="VLISk"></a></p>
<h3 id="什么是自动提交？"><a href="#什么是自动提交？" class="headerlink" title="什么是自动提交？"></a>什么是自动提交？</h3><p>MySQL默认采用自动提交AUTOCOMMIT模式。也就是说，如果不是显式地开始一个事务，则每个查询都被当作一个事务执行提交操作。<br />对于MyISAM或者内存表这些事务型的表，修改AUTOCOMMIT不会有任何影响。对这类表来说，没有COMMIT或者ROLLBACK的概念，也可以说是相当于一直处于AUTOCOMMIT启用的模式。<br><a name="x6GuV"></a></p>
<h1 id="主键"><a href="#主键" class="headerlink" title="主键"></a><br />主键</h1><blockquote>
<p>在 MySQL 中，主键需要遵循以下规则：</p>
<ul>
<li>主键是定义在表上的。一个表不强制定义主键，但最多只能定义一个主键。</li>
<li>主键可以包含一个列或者多个列。</li>
<li>主键列的值必须是唯一的。如果主键包含多个列，则这些列的值组合起来必须是唯一的。</li>
<li>主键列中不能包含 <strong>NULL</strong> 值。</li>
</ul>
</blockquote>
<p>如果不遵循上面的规则，则可能会引发以下的错误。</p>
<blockquote>
<ul>
<li>如果定义了多个主键，会返回错误：<strong>ERROR 1068 (42000): Multiple primary key defined</strong>。</li>
<li>如果<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/insert/">插入</a>或者<a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/update/">更新</a>时有重复的主键值，则会返回类似的错误：**ERROR 1062 (23000): Duplicate entry ‘1’ for key ‘user.PRIMARY’**。</li>
<li>如果插入了 <strong>NULL</strong> 值，则会返回类似的错误：<strong>ERROR 1048 (23000): Column ‘id’ cannot be null</strong>。</li>
</ul>
</blockquote>
<p><a name="Lhd1m"></a></p>
<h2 id="定义主键"><a href="#定义主键" class="headerlink" title="定义主键"></a>定义主键</h2><p>我们可以在创建表时定义主键。如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  name <span class="type">VARCHAR</span>(<span class="number">45</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>这里定义了 <strong>id</strong> 列为主键。<br />上面这种方式适合只有一列作为主键的情况，如果主键包含多列，请使用下面的方式:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> (</span><br><span class="line">  com_id <span class="type">INT</span>,</span><br><span class="line">  user_number <span class="type">INT</span>,</span><br><span class="line">  name <span class="type">VARCHAR</span>(<span class="number">45</span>),</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY(com_id, user_number)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>这里定义一个主键，它包含 <strong>com_id</strong> 和 <strong>user_number</strong> 2 列。</p>
<p><a name="phQyX"></a></p>
<h2 id="添加主键"><a href="#添加主键" class="headerlink" title="添加主键"></a>添加主键</h2><p>如果我们创建表的时候没有设置主键，而现在我们想添加一个主键，请使用下面的方式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(id);</span><br></pre></td></tr></table></figure>
<p>这里为 <strong>user</strong> 表添加了主键，该主键包括 <strong>id</strong> 列。<br />注意，当你向一个有数据的表中添加主键时，由于主键要求列的值是唯一的并且不能为 <strong>NULL</strong>，如果该列中有重复的值或者 <strong>NULL</strong> 值，则会返回类似如下的错误：<br /><strong>ERROR 1062 (23000): Duplicate entry ‘1’ for key ‘user.PRIMARY’</strong><br><a name="X1vdO"></a></p>
<h2 id="删除主键"><a href="#删除主键" class="headerlink" title="删除主键"></a>删除主键</h2><p>如果我们想删除一个表上主键，请使用下面的方式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure>
<p>这里，我们删除了 <strong>user</strong> 表上的主键。</p>
<p><a name="Xuwa3"></a></p>
<h2 id="如何产生主键值"><a href="#如何产生主键值" class="headerlink" title="如何产生主键值"></a>如何产生主键值</h2><p>通常在业务系统中，我们不使用业务字段作为主键，虽然它们也是唯一的。我们一般使用单独的字段作为主键，这主要是出于以下两方面的原因：</p>
<ol>
<li>保密业务数据</li>
<li>方便这些业务字段的修改</li>
</ol>
<p>为了生成唯一的主键值，我们通常采用以下方法：</p>
<ol>
<li><p>将主键字段设置为 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/auto-increment/">AUTO_INCREMENT</a>。声明为 <strong>AUTO_INCREMENT</strong> 的字段会自动生成连续的整数值。</p>
</li>
<li><p>使用 <strong>UUID()</strong> 函数。<strong>UUID()</strong> 函数产生一个长度为 36 个字符的字符串，并且永不重复。如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> UUID();</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+--------------------------------------+</span><br><span class="line">| UUID()                               |</span><br><span class="line">+--------------------------------------+</span><br><span class="line">| 523efe70-29ac-11ec-a78b-6dba5fac4247 |</span><br><span class="line">+--------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p><strong>UUID()</strong> 适合用在集群环境下。这样即使一个表被分区在多个服务器上，也不会产生相同的主键的记录。</p>
</li>
<li><p>使用 <strong>UUID_SHORT()</strong> 函数。<strong>UUID_SHORT()</strong> 函数返回一个 64 位无符号整数并全局唯一。如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> UUID_SHORT();</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+-------------------+</span><br><span class="line">| UUID_SHORT()      |</span><br><span class="line">+-------------------+</span><br><span class="line">| 99469056502923283 |</span><br><span class="line">+-------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p><a name="RHZJi"></a></p>
</li>
</ol>
<h1 id="外键"><a href="#外键" class="headerlink" title="外键"></a><br />外键</h1><p>外键相对于主键而言，用来引用其他表。外键通过子表的一个或多个列对应到父表的主键或唯一键值，将子表的行和父表行建立起关联关系。<br />让我们看一下 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/sample-database/">Sakila 示例数据库</a>中的 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/sakila/table-country/">country</a> 表和 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/sakila/table-city/">city</a> 表。下面是它们的关系图：<br /><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709197119003-65be21f7-ed22-49df-a228-20a8a3111779.png#averageHue=%23000000&clientId=u180aaf93-d6bf-4&from=paste&height=110&id=u04ce370a&originHeight=152&originWidth=522&originalType=binary&ratio=2&rotation=0&showTitle=false&size=15106&status=done&style=none&taskId=ue01b35db-a47e-4a72-9d2d-3b8d098c8fc&title=&width=377" alt="image.png"><br /><em>country 和 city 关系</em><br /><strong>country</strong> 表和 <strong>city</strong> 表是一对多的关系。一个国家中可以有多个城市，一个城市只能位于一个国家。<br />如果一个国家已经有了城市，那么这个你就不能轻易的从 <strong>country</strong> 表删除国家，否则就会造成这个城市数据的不完整。你也不能为一个城市设定一个不存在的 <strong>country_id</strong>，否则这个城市数据就是错误的。<br />外键约束能保证数据的完整和正确。<br><a name="Ycrsu"></a></p>
<h3 id="外键的语法"><a href="#外键的语法" class="headerlink" title="外键的语法"></a>外键的语法</h3><p>让我们看一下 <strong>city</strong> 表定义的外键约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> city\G</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">*************************** 1. row ***************************</span><br><span class="line">       Table: city</span><br><span class="line">Create Table: CREATE TABLE `city` (</span><br><span class="line">  `city_id` smallint unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `city` varchar(50) NOT NULL,</span><br><span class="line">  `country_id` smallint unsigned NOT NULL,</span><br><span class="line">  `last_update` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,</span><br><span class="line">  PRIMARY KEY (`city_id`),</span><br><span class="line">  KEY `idx_fk_country_id` (`country_id`),</span><br><span class="line">  CONSTRAINT `fk_city_country` FOREIGN KEY (`country_id`)</span><br><span class="line">    REFERENCES `country` (`country_id`)</span><br><span class="line">    ON DELETE RESTRICT</span><br><span class="line">    ON UPDATE CASCADE</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=601 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>注意其中的部分：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONSTRAINT</span> `fk_city_country` <span class="keyword">FOREIGN</span> KEY (`country_id`)</span><br><span class="line">    <span class="keyword">REFERENCES</span> `country` (`country_id`)</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">DELETE</span> RESTRICT</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE</span><br></pre></td></tr></table></figure>
<p>这里定义了一个外键：</p>
<ul>
<li>位于 <strong>CONSTRAINT</strong> 关键字之后的 <strong>fk_city_country</strong> 是外键的名字。它是可选的。</li>
<li>位于 <strong>FOREIGN KEY</strong> 关键字之后的是作为外键的列名。</li>
<li>位于 <strong>REFERENCES</strong> 关键字之后的是被引用的表和列。</li>
<li><strong>ON DELETE</strong> 和 <strong>ON UPDATE</strong> 指定了删除或更新被引用的表中的数据时要采取的约束策略。你可以使用以下 3 个策略中的一个：<ul>
<li><strong>CASCADE</strong>：如果被引用的表中的一行被删除或更新，该表中匹配行的值会自动删除或更新。</li>
<li><strong>SET NULL</strong>：如果被引用的表中的一行被删除或更新，该表中匹配行的值设置为 <strong>NULL</strong>。</li>
<li><strong>RESTRICT</strong>: 如果被引用的表中的一行在该表中有匹配的行，试图删除或更新被引用的表中行时会引发 MySQL 错误。这是默认的策略。</li>
</ul>
</li>
</ul>
<p>通常，外键所属的表被称作子表，被外键引用的表被称作父表。</p>
<p><a name="h45z9"></a></p>
<h3 id="添加外键语法"><a href="#添加外键语法" class="headerlink" title="添加外键语法"></a>添加外键语法</h3><p>如果建表的时候没有定义外键，你也可以后来通过以下语法添加外键：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> child_table_name</span><br><span class="line"><span class="keyword">ADD</span> [<span class="keyword">CONSTRAINT</span> foreign_key_name]</span><br><span class="line">  <span class="keyword">FOREIGN</span> KEY (<span class="keyword">column</span>))</span><br><span class="line">  <span class="keyword">REFERENCES</span> parent_table_name (<span class="keyword">column</span>)</span><br><span class="line">  <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE</span><br><span class="line">  <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">NO</span> ACTION</span><br><span class="line">  ;</span><br></pre></td></tr></table></figure>
<p>这里：</p>
<ul>
<li>使用 <a target="_blank" rel="noopener" href="https://www.sjkjc.com/mysql/table-alter/">ALTER TABLE</a> 语句修改表的定义。</li>
<li>使用 <strong>ADD [CONSTRAINT foreign_key_name]</strong> 添加一个名为 <strong>foreign_key_name</strong> 的约束。**[CONSTRAINT foreign_key_name]** 是可选的。</li>
<li>使用 <strong>FOREIGN KEY (column)) REFERENCES parent_table_name (column)</strong> 定义了外键。<br><a name="N6umb"></a></li>
</ul>
<h3 id="删除外键语法"><a href="#删除外键语法" class="headerlink" title="删除外键语法"></a>删除外键语法</h3><p>要删除表上外键，可以采用下面的两种语法之一：</p>
<ul>
<li><br />
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY foreign_key_name;</span><br></pre></td></tr></table></figure>
</li>
<li><br />
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> constraint_name;</span><br></pre></td></tr></table></figure>
这里：
</li>
<li><p>使用 <strong>ALTER TABLE</strong> 语句修改表的定义。</p>
</li>
<li><p><strong>DROP FOREIGN KEY</strong> 后面指定外键名，也就是约束名。</p>
</li>
<li><p><strong>DROP CONSTRAINT</strong> 后面指定约束名。它可以通过名字删除任何约束，并不仅仅是外键。</p>
</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709197619628-e1bf6689-1d7d-495c-8dbb-77d2cabdc2ad.png#averageHue=%23fafafa&clientId=u180aaf93-d6bf-4&from=paste&height=450&id=u163047fd&originHeight=900&originWidth=1690&originalType=binary&ratio=2&rotation=0&showTitle=false&size=315139&status=done&style=none&taskId=uf84a50da-14e1-48f8-881a-c0e4036a138&title=&width=845" alt="image.png"><br /><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709197677678-f5c3f3ba-8983-4d38-9abe-e7e165837e2b.png#averageHue=%23faf8f8&clientId=u180aaf93-d6bf-4&from=paste&height=318&id=u28dfcd93&originHeight=636&originWidth=1622&originalType=binary&ratio=2&rotation=0&showTitle=false&size=252826&status=done&style=none&taskId=uf89e5dbc-0a19-4225-840d-79023610902&title=&width=811" alt="image.png"></p>
<p><a name="Kam4U"></a></p>
<h3 id="CASCADE-策略"><a href="#CASCADE-策略" class="headerlink" title="CASCADE 策略"></a>CASCADE 策略</h3><p>如果外键的 <strong>ON DELETE</strong> 和 <strong>ON UPDATE</strong> 使用了 <strong>CASCADE</strong> 策略：</p>
<ul>
<li>当父表的行被删除的时候，子表中匹配的行也会被删除。</li>
<li>当父表的行的键值更新的时候，子表中匹配的行的字段也会被更新。<br><a name="xqEHC"></a></li>
</ul>
<h3 id="RESTRICT-策略"><a href="#RESTRICT-策略" class="headerlink" title="RESTRICT 策略"></a>RESTRICT 策略</h3><p>如果外键的 <strong>ON DELETE</strong> 和 <strong>ON UPDATE</strong> 使用了 <strong>RESTRICT</strong> 策略：</p>
<ul>
<li>MySQL 禁止删除父表中与子表匹配的行。</li>
<li>MySQL 禁止删除父表中与子表匹配的行的键的值。<br><a name="nt7cA"></a></li>
</ul>
<h3 id="SET-NULL-策略"><a href="#SET-NULL-策略" class="headerlink" title="SET NULL 策略"></a>SET NULL 策略</h3><p>如果外键的 <strong>ON DELETE</strong> 和 <strong>ON UPDATE</strong> 使用了 <strong>SET NULL</strong> 策略：</p>
<ul>
<li>当父表的行被删除的时候，子表中匹配的行的列的值被设置为 <strong>NULL</strong>。</li>
<li>当父表的行的键值被更新的时候，子表中匹配的行的列的值被设置为 <strong>NULL</strong>。</li>
</ul>
<p><a name="DmQcz"></a></p>
<h1 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h1><p><a name="iONUR"></a></p>
<h2 id="一对多"><a href="#一对多" class="headerlink" title="一对多"></a>一对多</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709200087060-99589196-8225-4d3a-a695-756377d6572e.png#averageHue=%23f9f8f8&clientId=u180aaf93-d6bf-4&from=paste&height=534&id=u3383a697&originHeight=1068&originWidth=1672&originalType=binary&ratio=2&rotation=0&showTitle=false&size=207949&status=done&style=none&taskId=uf4b44ded-ee0a-4430-9363-e869d338420&title=&width=836" alt="image.png"><br><a name="nzOZK"></a></p>
<h2 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709200101968-5b9b664b-349e-4b69-88ea-b453b486fc23.png#averageHue=%23fdfbfb&clientId=u180aaf93-d6bf-4&from=paste&height=369&id=uf565fd0f&originHeight=738&originWidth=1798&originalType=binary&ratio=2&rotation=0&showTitle=false&size=207940&status=done&style=none&taskId=ued621d22-6322-4190-8bed-836ba02c686&title=&width=899" alt="image.png"><br><a name="H3HIH"></a></p>
<h2 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709200450120-a24d5613-f667-4f8c-b20e-65454a48a435.png#averageHue=%23fdfbfb&clientId=u180aaf93-d6bf-4&from=paste&height=406&id=uecec752e&originHeight=812&originWidth=1808&originalType=binary&ratio=2&rotation=0&showTitle=false&size=314687&status=done&style=none&taskId=u35b4ecd8-ade7-441b-953e-f053e455eb0&title=&width=904" alt="image.png"><br><a name="fWE7K"></a></p>
<h1 id="三大范式"><a href="#三大范式" class="headerlink" title="三大范式"></a>三大范式</h1><p><a name="I61On"></a></p>
<h2 id="三大范式概念"><a href="#三大范式概念" class="headerlink" title="三大范式概念"></a>三大范式概念</h2><blockquote>
<p>第一范式(1NF)：每个列都不可以再拆分。<br>第二范式(2NF)：在第一范式的基础上，非主键列完全依赖于主键，而不能是依赖于主键的一部分。<br>第三范式(3NF)：在第二范式的基础上，非主键列只依赖于主键，不依赖于其他非主键。</p>
</blockquote>
<p><a name="kQmYN"></a></p>
<h2 id="第一范式"><a href="#第一范式" class="headerlink" title="第一范式"></a>第一范式</h2><p><strong><em>注意__⚠️__：这个表的主键是学号 + 课程名</em></strong><br />比如我们有一个表，以后的例子会对这个表进行三大范式的改造，然后把他变成规范的表：<br /><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709199456368-b4248202-3923-4cd5-8ec7-976ca5ceb9c4.png#averageHue=%23e3e5e2&clientId=u180aaf93-d6bf-4&from=paste&height=229&id=ud038284d&originHeight=249&originWidth=371&originalType=binary&ratio=2&rotation=0&showTitle=false&size=86588&status=done&style=none&taskId=u84746fe8-9afd-42d1-96d5-99be1bbc999&title=&width=341.5" alt="image.png"><br />进行第一范式的改造<br />第一范式(1NF)：每个列都不可以再拆分<br />我们可以看到表中有一列可以再分，那就是系，所以把他进行第一范式的改造就变成了：<br /><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709199470821-3b90696d-74a3-4fc3-b90a-8ab3d1cdc380.png#averageHue=%23e3e5e2&clientId=u180aaf93-d6bf-4&from=paste&height=256&id=uef475a1d&originHeight=256&originWidth=346&originalType=binary&ratio=2&rotation=0&showTitle=false&size=92972&status=done&style=none&taskId=u848a31e2-bd0f-48c4-a3dc-71587992c90&title=&width=346" alt="image.png"><br><a name="x1m1r"></a></p>
<h2 id="第二范式"><a href="#第二范式" class="headerlink" title="第二范式"></a>第二范式</h2><p>第二范式(2NF)：在第一范式的基础上，非主键列完全依赖于主键，而不能是依赖于主键的一部分。<br>:::tips<br>这第二范式不好理解，那么我们先了解几个概念：<br />1.函数依赖：如果通过A属性(属性组)，可以确定唯一B属性的值，那么B依赖于A。比如上图的姓名，完全依赖于学号<br />2.完全函数依赖：如果A是一个属性组，则B属性值的确定需要依赖于A属性组中的所有的属性值。属性组是指多个字段，那么比如我们要想知道一个分数，就必须依赖于学号和课程名称两个属性才能确定一个分数，其他的属性是不能确定某一个分数的<br />3.部分函数依赖：如果A是一个属性组，则B属性值的确定需要依赖A属性组的某一些字段即可，例如学号和课程名称为一个属性组，那么学生姓名其实就只需要学号就可以确定<br />4.传递函数依赖：如果A属性(属性组),可以确定唯一个B属性的值，再通过B属性的值又可以唯一确定C属性的值，例如一个学号确定一个系名，一个系名对应一个系主任<br />5.主键：在一张表中，一个属性或者属性组，被其他所有属性完全依赖，则称这个属性为该码的表，比如上图的学号和课程名称组成的属性组<br>:::<br>其实第二范式就是还可以理解为:<br />在第一范式的基础上消除非主键对主键的部分依赖</p>
<p>那么我们上图的主键为学号加课程名称组成的属性组，对于上图，我们可以看到，除了分数其他的都对主键是部分依赖，那么我们可以按照下图的方式进行改正：<br /><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709200893525-27bfe321-c6a6-4264-92d8-a7eb9a5c9009.png#averageHue=%23eaebe9&clientId=u180aaf93-d6bf-4&from=paste&height=285&id=uba13ace2&originHeight=281&originWidth=227&originalType=binary&ratio=2&rotation=0&showTitle=false&size=51932&status=done&style=none&taskId=u4dd63259-ddfc-4f4d-82f3-cef89c93ef2&title=&width=230.5" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709200902018-669f634a-b677-4b01-b0bc-9bfe1e50b749.png#averageHue=%23eeefec&clientId=u180aaf93-d6bf-4&from=paste&height=162&id=u54802e05&originHeight=209&originWidth=289&originalType=binary&ratio=2&rotation=0&showTitle=false&size=46150&status=done&style=none&taskId=u45bd4cfc-c3f1-4089-8c8d-0cd39f19726&title=&width=224.5" alt="image.png"><br /><strong>经过第二范式的改造把一个表分成两个表，那么我们发现其实第二范式为我们消除了很多冗余的部分</strong>，比如改造前张无忌的姓名系名系主任在表中出现了三次，而改造后在两表才出现一次<br />再举一个例子：<br />这里的<code>courses</code>表的所有字段都是<code>courses</code>的一个属性，所以他符合第二范式。<br />而如果我们这里包含这门课被注册的时间(enrollment_data)，它并不是<code>courses</code>的一个属性，这们课可以有多个学生，每个学生有不同的注册日期，所以这列<code>enrollment_data</code>不属于这张表<br /><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709201642613-91df1f7f-470f-4d86-8e4f-9bdd81de21a6.png#averageHue=%23dcdace&clientId=u180aaf93-d6bf-4&from=paste&height=327&id=u217c1da0&originHeight=654&originWidth=754&originalType=binary&ratio=2&rotation=0&showTitle=false&size=195847&status=done&style=none&taskId=u100aecd3-5751-472c-a243-7b09faf5b33&title=&width=377" alt="image.png"></p>
<p>再来一个例子：<br />一个<code>ORDERS</code>表，含有顾客名列描述了一位顾客而不是一个订单，此时这个用户订购了多张订单，他的名字就会重复，这不仅浪费空间，还会让我们更新的很痛苦<br /><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709202027124-632af60c-d78f-4c93-9a80-77754f5e0b19.png#averageHue=%23fefefc&clientId=u180aaf93-d6bf-4&from=paste&height=494&id=uaeacab4c&originHeight=988&originWidth=1576&originalType=binary&ratio=2&rotation=0&showTitle=false&size=194247&status=done&style=none&taskId=u21432b5a-7998-4dab-8beb-2ec12654dc0&title=&width=788" alt="image.png"><br />我们改进一下，这样我们修改用户名的时候只需要修改一次就好了<br /><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709278551196-60258c1c-a093-4adf-a31a-b09959d1d26f.png#averageHue=%23fefefc&clientId=ua18391e1-f73a-4&from=paste&height=565&id=uefc9dcd4&originHeight=1130&originWidth=2802&originalType=binary&ratio=2&rotation=0&showTitle=false&size=309373&status=done&style=none&taskId=ued412cc5-867c-4d3f-8219-cd3c5d91fa1&title=&width=1401" alt="image.png"><br><a name="YosVD"></a></p>
<h2 id="第三范式"><a href="#第三范式" class="headerlink" title="第三范式"></a>第三范式</h2><blockquote>
<p>第三范式：表中的列不应派生自其他的列</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/39143682/1709279098121-09a73c88-32de-4a26-9575-d39f243937aa.png#averageHue=%23f4f4f2&clientId=ua18391e1-f73a-4&from=paste&height=548&id=u37463dea&originHeight=1096&originWidth=2442&originalType=binary&ratio=2&rotation=0&showTitle=false&size=247417&status=done&style=none&taskId=u17308377-a424-4547-a768-00f306704ea&title=&width=1221" alt="image.png"><br /><code>balance</code>是由<code>invoice_total</code>列和<code>patment_total</code>列来决定的，这违背了第三范式。<br><a name="MqqSP"></a></p>
<h1 id="创建和删除数据库"><a href="#创建和删除数据库" class="headerlink" title="创建和删除数据库"></a>创建和删除数据库</h1><p>创建</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> a_database;</span><br></pre></td></tr></table></figure>
<p>删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> a_database;</span><br></pre></td></tr></table></figure>
<p><a name="sWTQo"></a></p>
<h1 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h1><p>创建一张表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> customers</span><br><span class="line">(</span><br><span class="line">customer_id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">first_name	<span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">points		<span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">email		<span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> customers;</span><br></pre></td></tr></table></figure>
<p><a name="eGrH7"></a></p>
<h1 id="更改表"><a href="#更改表" class="headerlink" title="更改表"></a>更改表</h1><p>需求：我们发现忘记添加或删除表中的数据<br><a name="c2l5S"></a></p>
<h2 id="添加、删除、更改列"><a href="#添加、删除、更改列" class="headerlink" title="添加、删除、更改列"></a>添加、删除、更改列</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> customers</span><br><span class="line"><span class="keyword">ADD</span> last_name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AFTER first_name,</span><br><span class="line"><span class="keyword">ADD</span> city 	    <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">MODIFY <span class="keyword">COLUMN</span> first_name <span class="type">VARCHAR</span>(<span class="number">55</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="keyword">DROP</span> points</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p><a name="uw7bH"></a></p>
<meta name="referrer" content="no-referrer" />


</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">B1n_</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/03/01/MySQL%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9%E9%80%9F%E6%9F%A5/">http://example.com/2024/03/01/MySQL%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9%E9%80%9F%E6%9F%A5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/03/01/%E5%A0%86%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/" title="堆结构基础"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">堆结构基础</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">B1n_</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%98%85%E8%AF%BB%E5%89%8D%E6%8F%90%E9%86%92%E2%9A%A0%EF%B8%8F%E2%9A%A0%EF%B8%8F%E2%9A%A0%EF%B8%8F"><span class="toc-number">1.</span> <span class="toc-text">阅读前提醒⚠️⚠️⚠️</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SELECT"><span class="toc-number">2.</span> <span class="toc-text">SELECT</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#AND"><span class="toc-number">2.1.</span> <span class="toc-text">AND</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OR"><span class="toc-number">2.2.</span> <span class="toc-text">OR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IN"><span class="toc-number">2.3.</span> <span class="toc-text">IN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BETWEEN"><span class="toc-number">2.4.</span> <span class="toc-text">BETWEEN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LIKE"><span class="toc-number">2.5.</span> <span class="toc-text">LIKE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IS-NULL"><span class="toc-number">2.6.</span> <span class="toc-text">IS NULL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EXISTS%EF%BC%88%E6%9C%89%E7%82%B9%E6%87%B5%EF%BC%89"><span class="toc-number">2.7.</span> <span class="toc-text">EXISTS（有点懵）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ORDER-BY"><span class="toc-number">2.8.</span> <span class="toc-text">ORDER BY</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%92%E5%BA%8F"><span class="toc-number">2.9.</span> <span class="toc-text">自定义排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LIMIT"><span class="toc-number">2.10.</span> <span class="toc-text">LIMIT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DISTINCT"><span class="toc-number">2.11.</span> <span class="toc-text">DISTINCT</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.</span> <span class="toc-text">多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JOIN"><span class="toc-number">3.1.</span> <span class="toc-text">JOIN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.2.</span> <span class="toc-text">交叉连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.3.</span> <span class="toc-text">内连接</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.</span> <span class="toc-text">外连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.0.1.</span> <span class="toc-text">左外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%B3%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.0.2.</span> <span class="toc-text">右连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UNION"><span class="toc-number">4.1.</span> <span class="toc-text">UNION</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UNION-ALL"><span class="toc-number">4.1.1.</span> <span class="toc-text">UNION ALL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BB%A1%E5%85%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.2.</span> <span class="toc-text">满全连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E5%88%AB%E5%90%8D"><span class="toc-number">4.3.</span> <span class="toc-text">表别名</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#INSERT"><span class="toc-number">5.</span> <span class="toc-text">INSERT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#INSERT-%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">5.0.1.</span> <span class="toc-text">INSERT 修饰符</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DELETE"><span class="toc-number">6.</span> <span class="toc-text">DELETE</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%90%E5%88%B6%E5%88%A0%E9%99%A4%E7%9A%84%E6%9C%80%E5%A4%A7%E8%A1%8C%E6%95%B0"><span class="toc-number">6.1.</span> <span class="toc-text">限制删除的最大行数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DELETE-%E5%A4%9A%E8%A1%A8%E5%88%A0%E9%99%A4"><span class="toc-number">6.2.</span> <span class="toc-text">DELETE 多表删除</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#UPDATE"><span class="toc-number">7.</span> <span class="toc-text">UPDATE</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%9B%B4%E6%96%B0"><span class="toc-number">7.0.1.</span> <span class="toc-text">使用子查询更新</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#GROUP-BY"><span class="toc-number">8.</span> <span class="toc-text">GROUP BY</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GROUP-BY-%E4%B8%8E%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E5%AE%9E%E4%BE%8B"><span class="toc-number">8.0.1.</span> <span class="toc-text">GROUP BY 与聚合函数实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GROUP-BY-LIMIT-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E5%AE%9E%E4%BE%8B"><span class="toc-number">8.0.2.</span> <span class="toc-text">GROUP BY, LIMIT, 聚合函数实例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HAVING"><span class="toc-number">9.</span> <span class="toc-text">HAVING</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HAVING-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%9A"><span class="toc-number">9.1.</span> <span class="toc-text">HAVING+聚合函数注意事项：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA%EF%BC%9A"><span class="toc-number">9.1.1.</span> <span class="toc-text">结论：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WHERE-%E4%B8%8E-HAVING-%E5%AF%B9%E6%AF%94"><span class="toc-number">9.2.</span> <span class="toc-text">WHERE 与 HAVING 对比</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL%E5%BA%95%E5%B1%82%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="toc-number">10.</span> <span class="toc-text">SQL底层执行原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SELECT%E8%AF%AD%E5%8F%A5%E5%AE%8C%E6%95%B4%E7%BB%93%E6%9E%84"><span class="toc-number">10.1.</span> <span class="toc-text">SELECT语句完整结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">10.2.</span> <span class="toc-text">SQL语句执行过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%AD%A5%E9%AA%A4%E8%AF%A6%E8%A7%A3%EF%BC%9A"><span class="toc-number">10.3.</span> <span class="toc-text">执行步骤详解：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">11.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E4%B8%8E-IN"><span class="toc-number">11.1.</span> <span class="toc-text">子查询与 IN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B4%BE%E7%94%9F%E8%A1%A8"><span class="toc-number">11.2.</span> <span class="toc-text">派生表</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">12.</span> <span class="toc-text">数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#VARCHAR"><span class="toc-number">12.1.</span> <span class="toc-text">VARCHAR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-VARCHAR-%E8%AF%AD%E6%B3%95"><span class="toc-number">12.2.</span> <span class="toc-text">MySQL VARCHAR 语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VARCHAR-%E6%88%AA%E6%96%AD%E5%86%85%E5%AE%B9"><span class="toc-number">12.3.</span> <span class="toc-text">VARCHAR 截断内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CHAR"><span class="toc-number">12.4.</span> <span class="toc-text">CHAR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-CHAR-%E8%AF%AD%E6%B3%95"><span class="toc-number">12.5.</span> <span class="toc-text">MySQL CHAR 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%BC%80%E7%A9%BA%E6%A0%BC%E9%97%AE%E9%A2%98"><span class="toc-number">12.5.1.</span> <span class="toc-text">后缀空格问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E8%B6%85%E8%BF%87%E9%95%BF%E5%BA%A6%E7%9A%84%E5%80%BC"><span class="toc-number">12.5.2.</span> <span class="toc-text">插入超过长度的值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#INT"><span class="toc-number">12.6.</span> <span class="toc-text">INT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-INT-%E8%AF%AD%E6%B3%95"><span class="toc-number">12.7.</span> <span class="toc-text">MySQL INT 语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-INT-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%AE%9E%E4%BE%8B"><span class="toc-number">12.8.</span> <span class="toc-text">MySQL INT 数据类型实例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-INT-%E5%88%97%E5%B9%B6%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">12.8.1.</span> <span class="toc-text">定义 INT 列并插入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-INT-%E5%88%97%E4%BD%9C%E4%B8%BA%E8%87%AA%E5%A2%9E%E5%88%97"><span class="toc-number">12.8.2.</span> <span class="toc-text">使用 INT 列作为自增列</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DEMICAL"><span class="toc-number">12.9.</span> <span class="toc-text">DEMICAL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-DECIMAL-%E8%AF%AD%E6%B3%95"><span class="toc-number">12.10.</span> <span class="toc-text">MySQL DECIMAL 语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-DECIMAL-%E5%AE%9E%E4%BE%8B"><span class="toc-number">12.11.</span> <span class="toc-text">MySQL DECIMAL 实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BIT"><span class="toc-number">12.12.</span> <span class="toc-text">BIT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-BIT-%E8%AF%AD%E6%B3%95"><span class="toc-number">12.13.</span> <span class="toc-text">MySQL BIT 语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BIT-%E5%AD%97%E9%9D%A2%E5%80%BC"><span class="toc-number">12.14.</span> <span class="toc-text">BIT 字面值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5-BIT-%E5%80%BC"><span class="toc-number">12.14.1.</span> <span class="toc-text">插入 BIT 值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DATA"><span class="toc-number">12.15.</span> <span class="toc-text">DATA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-DATE-%E8%AF%AD%E6%B3%95"><span class="toc-number">12.16.</span> <span class="toc-text">MySQL DATE 语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-%E6%97%A5%E6%9C%9F%E5%AE%9E%E4%BE%8B"><span class="toc-number">12.17.</span> <span class="toc-text">MySQL 日期实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-DATE-%E5%87%BD%E6%95%B0"><span class="toc-number">12.18.</span> <span class="toc-text">MySQL DATE 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DATE-FORMAT"><span class="toc-number">12.18.1.</span> <span class="toc-text">DATE_FORMAT()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DATETIME"><span class="toc-number">12.19.</span> <span class="toc-text">DATETIME</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E4%B8%8E%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-number">12.20.</span> <span class="toc-text">MySQL 日期时间与时间戳</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#YEAR"><span class="toc-number">12.21.</span> <span class="toc-text">YEAR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-YEAR-%E5%AE%9E%E4%BE%8B"><span class="toc-number">12.22.</span> <span class="toc-text">MySQL YEAR 实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-ENUM-%E8%AF%AD%E6%B3%95"><span class="toc-number">12.23.</span> <span class="toc-text">MySQL ENUM 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5-MySQL-ENUM-%E5%80%BC"><span class="toc-number">12.23.1.</span> <span class="toc-text">插入 MySQL ENUM 值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-ENUM-%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-number">12.24.</span> <span class="toc-text">MySQL ENUM 的缺点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E4%BA%8B%E5%8A%A1"><span class="toc-number">12.25.</span> <span class="toc-text">MySQL事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%89%B9%E6%80%A7-ACID-%E3%80%90%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%80%83%E9%A1%B9%E3%80%91"><span class="toc-number">12.25.1.</span> <span class="toc-text">事务的四个特性(ACID)【面试常考项】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%8F%E8%AF%BB"><span class="toc-number">12.25.2.</span> <span class="toc-text">脏读</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="toc-number">12.25.3.</span> <span class="toc-text">不可重复读</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BB%E8%AF%BB"><span class="toc-number">12.25.4.</span> <span class="toc-text">幻读</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E4%B8%8E%E5%B9%BB%E8%AF%BB%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">12.25.5.</span> <span class="toc-text">不可重复读与幻读有什么区别？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">12.26.</span> <span class="toc-text">隔离级别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4%EF%BC%9F"><span class="toc-number">12.26.1.</span> <span class="toc-text">什么是自动提交？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE"><span class="toc-number">13.</span> <span class="toc-text">主键</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%94%AE"><span class="toc-number">13.1.</span> <span class="toc-text">定义主键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%94%AE"><span class="toc-number">13.2.</span> <span class="toc-text">添加主键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE"><span class="toc-number">13.3.</span> <span class="toc-text">删除主键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BA%A7%E7%94%9F%E4%B8%BB%E9%94%AE%E5%80%BC"><span class="toc-number">13.4.</span> <span class="toc-text">如何产生主键值</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%96%E9%94%AE"><span class="toc-number">14.</span> <span class="toc-text">外键</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">14.0.1.</span> <span class="toc-text">外键的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE%E8%AF%AD%E6%B3%95"><span class="toc-number">14.0.2.</span> <span class="toc-text">添加外键语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE%E8%AF%AD%E6%B3%95"><span class="toc-number">14.0.3.</span> <span class="toc-text">删除外键语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CASCADE-%E7%AD%96%E7%95%A5"><span class="toc-number">14.0.4.</span> <span class="toc-text">CASCADE 策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RESTRICT-%E7%AD%96%E7%95%A5"><span class="toc-number">14.0.5.</span> <span class="toc-text">RESTRICT 策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SET-NULL-%E7%AD%96%E7%95%A5"><span class="toc-number">14.0.6.</span> <span class="toc-text">SET NULL 策略</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="toc-number">15.</span> <span class="toc-text">多表关系</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A"><span class="toc-number">15.1.</span> <span class="toc-text">一对多</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="toc-number">15.2.</span> <span class="toc-text">多对多</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80"><span class="toc-number">15.3.</span> <span class="toc-text">一对一</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F"><span class="toc-number">16.</span> <span class="toc-text">三大范式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F%E6%A6%82%E5%BF%B5"><span class="toc-number">16.1.</span> <span class="toc-text">三大范式概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F"><span class="toc-number">16.2.</span> <span class="toc-text">第一范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F"><span class="toc-number">16.3.</span> <span class="toc-text">第二范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-number">16.4.</span> <span class="toc-text">第三范式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">17.</span> <span class="toc-text">创建和删除数据库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">18.</span> <span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E8%A1%A8"><span class="toc-number">19.</span> <span class="toc-text">更改表</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E3%80%81%E5%88%A0%E9%99%A4%E3%80%81%E6%9B%B4%E6%94%B9%E5%88%97"><span class="toc-number">19.1.</span> <span class="toc-text">添加、删除、更改列</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/01/MySQL%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9%E9%80%9F%E6%9F%A5/" title="MySQL基础知识速查">MySQL基础知识速查</a><time datetime="2024-03-01T09:03:13.467Z" title="Created 2024-03-01 17:03:13">2024-03-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/01/%E5%A0%86%E7%BB%93%E6%9E%84%E5%9F%BA%E7%A1%80/" title="堆结构基础">堆结构基础</a><time datetime="2024-03-01T01:49:35.451Z" title="Created 2024-03-01 09:49:35">2024-03-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/29/%E4%BD%8D%E5%85%83%E7%AE%97/" title="位运算">位运算</a><time datetime="2024-02-29T15:56:30.525Z" title="Created 2024-02-29 23:56:30">2024-02-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/29/hello-world/" title="Hello World">Hello World</a><time datetime="2024-02-29T13:47:42.025Z" title="Created 2024-02-29 21:47:42">2024-02-29</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By B1n_</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>